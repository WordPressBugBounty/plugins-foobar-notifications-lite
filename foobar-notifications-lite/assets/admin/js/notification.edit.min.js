"use strict";!function(t){t.ready(function(t){t(".foobar-shortcode").on("click",function(){try{this.select(),document.execCommand("copy"),t(this).siblings(".foobar-shortcode-message").show()}catch(t){console.log("Oops, unable to copy!")}})})}((FooBar,FooBar.utils),FooBar.utils.is),function(r,t,a,l){t.IconPicker=t.Field.extend({construct:function(t,e,o,i,n){var s=this;s._super(t,e,o,i,n),s.$doc=r(document),s.initial=s.$value.val(),s.hasDefault=!l.empty(s.opt.default),s.$container=r("<div/>",{class:s.cls.container}),s.containerElement=s.$container.get(0),s.$button=r("<button/>",{class:"button "+s.cls.button,type:"button"}),s.$clear=r("<button/>",{class:"button button-small "+s.cls.clear,type:"button",text:s.hasDefault?s.i18n.default:s.i18n.clear}),s.$icon=r("<span/>",{class:s.cls.icon}),s.$text=r("<span/>",{class:s.cls.text,text:s.i18n.select}),s.$list=r("<div/>",{class:s.cls.list}),s.$selected=r(),s.icons=a.icons.all()},setup:function(){var t=this;l.empty(t.icons)||(t.$container.append(t.$button.append(t.$icon,t.$text),t.$clear,t.$list.append(t.createItems())),t.$button.on("click",{self:t},t.onButtonClick),t.$clear.on("click",{self:t},t.onClearClick),t.$list.on("click",t.sel.item,{self:t},t.onItemClick),t.$value.addClass(t.cls.hidden).after(t.$container),t.val(t.$value.val()))},createItems:function(){var e=this;return Object.keys(e.icons).map(function(t){return r("<button/>",{class:e.cls.item,title:t,type:"button"}).append(e.icons[t].cloneNode(!0))})},teardown:function(){var t=this;t.$value.removeClass(t.cls.hidden),t.$container.remove(),t.$doc.off("click."+t.id,t.onDocumentClick),t.$button.off("click",{self:t},t.onButtonClick),t.$clear.off("click",{self:t},t.onClearClick),t.$list.off("click",t.sel.item,{self:t},t.onItemClick)},val:function(t){var e=this;if(l.undef(t))return e.$value.val();var o=e.$value.val(),i="";l.string(t)&&e.icons.hasOwnProperty(t)?(i=t,e.$selected=e.$list.find('[title="'+i+'"]'),e.$value.val(i),e.$icon.empty().append(e.icons[i].cloneNode(!0))):(e.$selected=r(),e.$value.val(i),e.$icon.empty()),e.$list.find(e.sel.selected).removeClass(e.cls.selected),e.$selected.addClass(e.cls.selected),o!==i&&e.doValueChanged()},toggleDropdown:function(t){var e,o,i=this;i.dropdownVisible=l.boolean(t)?t:!i.dropdownVisible,i.dropdownVisible?(i.$container.addClass(i.cls.visible),e=i.$list.get(0),0!==i.$selected.length?(o=i.$selected.get(0),e.scrollTo(0,o.offsetTop)):e.scrollTo(0,0),i.$doc.on("click."+i.id,{self:i},i.onDocumentClick)):(i.$doc.off("click."+i.id,i.onDocumentClick),i.$container.removeClass(i.cls.visible))},onDocumentClick:function(t){var e=t.data.self;r.contains(e.containerElement,t.target)||e.toggleDropdown(!1)},onButtonClick:function(t){t.preventDefault(),t.data.self.toggleDropdown()},onClearClick:function(t){t.preventDefault();var e=t.data.self;e.val(e.hasDefault?e.opt.default:"")},onItemClick:function(t){t.data.self.val(this.title)}}),t.fields.register("icon-picker",t.IconPicker,".foofields-type-icon-picker",{default:null},{container:"fip-container",button:"fip-button",clear:"fip-clear",icon:"fip-icon",text:"fip-text",list:"fip-list",item:"fip-item",hidden:"fip-hidden",visible:"fip-visible",selected:"fip-selected",sr:"fip-sr"},{select:"Select Icon",clear:"Clear",default:"Default"})}(FooFields.$,FooFields,FooBar,(FooFields.utils,FooFields.utils.is)),function(t){t.Numeric=t.Field.extend({setup:function(){var t=this;t.currentValue=t.val(),t.debouncedId=null,t.$change.off("change",t.onValueChanged).on("input.foofields",{self:t},t.onInputChange)},teardown:function(){clearTimeout(this.debouncedId),this.$change.off(".foofields")},onInputChange:function(t){var e=t.data.self,o=e.val();o!==e.currentValue&&(e.currentValue=o,e.doValueChanged())}}),t.fields.register("numeric",t.Numeric,".foofields-type-numeric",{},{},{})}((FooFields.$,FooFields),(FooFields.utils.is,FooFields.utils.fn,FooFields.utils.obj)),function(t,l){t.DateTime=t.Field.extend({setup:function(){var t=this;t.$date=t.$input.find('input[type="date"]'),t.$hours=t.$input.find(".foofields-time-hours").find('input[type="number"]'),t.$minutes=t.$input.find(".foofields-time-minutes").find('input[type="number"]'),t.currentValue=t.val(),t.$change.off("change",t.onValueChanged).on("input.foofields",{self:t},t.onInputChange)},teardown:function(){this.$change.off(".foofields")},val:function(t){var e=this,o=e.$date.val(),i=e.$hours.val(),n=e.$minutes.val(),s=new Date(o);s.setHours(i,n);var r=s.getTime();if(!l.number(t)||t===r)return s.getTime();var a=new Date(t);e.$date.val(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()),e.$hours.val(a.getHours()),e.$minutes.val(a.getMinutes()),e.doValueChanged()},onInputChange:function(t){var e=t.data.self,o=e.val();o!==e.currentValue&&(e.currentValue=o,e.doValueChanged())}}),t.fields.register("datetime",t.DateTime,".foofields-type-datetime",{},{},{})}((FooFields.$,FooFields),FooFields.utils.is,(FooFields.utils.fn,FooFields.utils.obj)),function(t,l){t.TimeSelector=t.Field.extend({setup:function(){var t=this;t.SECOND_IN_MS=1e3,t.MINUTE_IN_MS=60*t.SECOND_IN_MS,t.HOUR_IN_MS=60*t.MINUTE_IN_MS,t.DAY_IN_MS=24*t.HOUR_IN_MS,t.$days=t.$input.find(".foofields-time-days").find('input[type="number"]'),t.$hours=t.$input.find(".foofields-time-hours").find('input[type="number"]'),t.$minutes=t.$input.find(".foofields-time-minutes").find('input[type="number"]'),t.$seconds=t.$input.find(".foofields-time-seconds").find('input[type="number"]'),t.currentValue=t.val(),t.$change.off("change",t.onValueChanged).on("input.foofields",{self:t},t.onInputChange)},teardown:function(){this.$change.off(".foofields")},val:function(t){var e=this,o=e.$days.val(),i=e.$hours.val(),n=e.$minutes.val(),s=e.$seconds.val(),r=o*e.DAY_IN_MS+i*e.HOUR_IN_MS+n*e.MINUTE_IN_MS+s*e.SECOND_IN_MS;if(!l.number(t)||t===r)return r;var a={days:Math.floor(t/e.DAY_IN_MS),hours:Math.floor(t%e.DAY_IN_MS/e.HOUR_IN_MS),minutes:Math.floor(t%e.HOUR_IN_MS/e.MINUTE_IN_MS),seconds:Math.floor(t%e.MINUTE_IN_MS/e.SECOND_IN_MS),milliseconds:t};e.$days.val(a.days),e.$hours.val(a.hours),e.$minutes.val(a.minutes),e.$seconds.val(a.seconds),e.doValueChanged()},onInputChange:function(t){var e=t.data.self,o=e.val();o!==e.currentValue&&(e.currentValue=o,e.doValueChanged())}}),t.fields.register("time-selector",t.TimeSelector,".foofields-type-time-selector",{},{},{})}((FooFields.$,FooFields),FooFields.utils.is,(FooFields.utils.fn,FooFields.utils.obj)),function(r,t){r.Conditions=r.Field.extend({construct:function(t,e,o,i,n){var s=this;s._super(t,e,o,i,n),s.$addButton=s.$input.children(s.sel.add),s.$table=s.$input.children("table").first(),s.$tbody=s.$table.children("tbody").first(),s.$template=s.$table.children("tfoot").first().children("tr").first(),s.rows=s.$tbody.children("tr").map(function(t,e){return new r.Conditions.Row(s,e)}).get()},init:function(){var n,s=this;s._super(),s.$addButton.on("click.foofields",{self:s},s.onAddNewClick),s.rows.forEach(function(t){t.init()}),s.$tbody.sortable({cancel:":input",forcePlaceholderSize:!0,placeholder:"foofields-conditions-placeholder",items:"> tr",distance:5,start:function(t,e){n=e.item.index(),e.placeholder.height(e.item.height())},update:function(t,e){var o=e.item.index(),i=n<o?n:o;s.$tbody.children("tr").eq(i).nextAll("tr").andSelf().trigger("index-change")}}),0===s.rows.length&&s.addNewRow()},destroy:function(){this.$tbody.sortable("destroy"),this.rows.forEach(function(t){t.destroy()}),this.$addButton.off(".foofields"),this._super()},addNewRow:function(){var t=this,e=new r.Conditions.Row(t,t.$template.clone());return t.rows.push(e),t.$tbody.append(e.$el).sortable("refresh"),e.init(!0),t.$el.removeClass(t.cls.empty),t.doValueChanged(),e},remove:function(t){var e=this,o=t.$el.nextAll("tr");t.$el.remove();var i=e.rows.indexOf(t);-1!==i&&e.rows.splice(i,1),0===e.rows.length?e.opt.allowEmpty?e.$el.addClass(e.cls.empty):e.addNewRow():(e.$tbody.sortable("refresh"),o.trigger("index-change"),e.doValueChanged())},onAddNewClick:function(t){t.preventDefault(),t.stopPropagation(),t.data.self.addNewRow()},toggle:function(t){this._super(t),this.$template.find(":input").attr("disabled","disabled")},val:function(o){if(!t.array(o))return this.rows.map(function(t){return t.val()});this.rows.forEach(function(t,e){t.val(e<o.length?o[e]:[])})}}),r.fields.register("conditions",r.Conditions,".foofields-type-conditions",{allowEmpty:!1},{add:"foofields-conditions-add",empty:"foofields-empty"},{})}((FooFields.$,FooFields),FooFields.utils.is,FooFields.utils.obj),function(r,i,t,a){i.Conditions.Row=i.Component.extend({construct:function(t,e){var o=this;o._super(t.instance,e,t.cls,t.sel),o.parent=t,o.ctnr=t.ctnr,o.$cells=o.$el.children("td,th"),o.fields=o.$cells.children(o.sel.el).map(function(t,e){return i.fields.create(o,e)}).get(),o.regex={id:/(_)-?\d+(_|-?)/i,name:/(\[)-?\d+(])/i}},init:function(t){var e=this;e._super(),e.$el.on("index-change.foofields",{self:e},e.onIndexChange),e.fields.forEach(function(t){t.on("change",e.onFieldChange,e),t.init()}),t&&e.reindex()},destroy:function(){var e=this;e.fields.forEach(function(t){t.off("change",e.onFieldChange,e),t.destroy()}),e._super()},remove:function(){this.parent.remove(this)},reindex:function(){var o=this,i=o.$el.index();o.fields.forEach(function(t){t.id=o.update(t.$el,i),t.$el.find("[id],[name]").each(function(t,e){o.update(e,i)})}),o.trigger("index-change",[i])},update:function(t,e){var o,i=(t=a.jq(t)?t:r(t)).prop("id");!a.string(i)||(o=i.replace(this.regex.id,"$1"+e+"$2"))!==i&&(t.prop("id",o),i=o);var n,s=t.prop("name");return!a.string(s)||(n=s.replace(this.regex.name,"$1"+e+"$2"))!==s&&t.prop("name",n),i},field:function(e){return t.find(this.fields,function(t){return t.id===e})},onIndexChange:function(t){t.data.self.reindex()},onFieldChange:function(){this.parent.doValueChanged()},enable:function(){this.fields.forEach(function(t){t.enable()})},val:function(o){var t=this.fields.filter(function(t){return!(t instanceof i.Conditions.RowIndex)});if(!a.array(o))return t.map(function(t){return t.val()});t.forEach(function(t,e){t.val(e<o.length?o[e]:"")})}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(t,o){t.Conditions.RowIndex=t.Field.extend({setup:function(){this.content.on("index-change",this.onIndexChange,this)},teardown:function(){this.content.off("index-change")},onIndexChange:function(t,e){this.$input.text(o.format(this.opt.format,{index:e,count:e+1}))}}),t.fields.register("conditions-index",t.Conditions.RowIndex,".foofields-type-conditions-index",{format:"{count}"},{},{})}((FooFields.$,FooFields),(FooFields.utils.is,FooFields.utils.str)),function(r,t){r.Conditions.Group=r.Field.extend({construct:function(t,e,o,i,n){var s=this;s._super(t,e,o,i,n),s.$addButton=s.$input.children(s.sel.add),s.$removeButton=s.$input.children(s.sel.remove),s.$table=s.$input.children("table").first(),s.$tbody=s.$table.children("tbody").first(),s.$template=s.$table.children("tfoot").first().children("tr").first(),s.rows=s.$tbody.children("tr").map(function(t,e){return new r.Conditions.Group.Row(s,e)}).get()},init:function(){var n,s=this;s._super(),s.$addButton.on("click.foofields",{self:s},s.onAddNewClick),s.$removeButton.on("click.foofields",{self:s},s.onRemoveClick),s.rows.forEach(function(t){t.init()}),s.$tbody.sortable({cancel:":input",forcePlaceholderSize:!0,placeholder:"foofields-conditions-group-placeholder",items:"> tr",distance:5,start:function(t,e){n=e.item.index(),e.placeholder.height(e.item.height())},update:function(t,e){var o=e.item.index(),i=n<o?n:o;s.$tbody.children("tr").eq(i).nextAll("tr").andSelf().trigger("index-change")}}),0===s.rows.length&&s.addNewRow()},destroy:function(){this.$tbody.sortable("destroy"),this.rows.forEach(function(t){t.destroy()}),this.$addButton.off(".foofields"),this._super()},addNewRow:function(t){var e=this,o=new r.Conditions.Group.Row(e,e.$template.clone());return t instanceof r.Conditions.Group.Row?(e.rows.push(o),t.$el.after(o.$el)):(e.rows.push(o),e.$tbody.append(o.$el)),e.$tbody.sortable("refresh"),o.init(!0),e.$el.removeClass(e.cls.empty),e.doValueChanged(),o},remove:function(t){var e,o,i=this;t instanceof r.Conditions.Group.Row?(e=t.$el.nextAll("tr"),t.$el.remove(),-1!==(o=i.rows.indexOf(t))&&i.rows.splice(o,1),0===i.rows.length?i.opt.allowEmpty?i.$el.addClass(i.cls.empty):i.content.remove():(i.$tbody.sortable("refresh"),e.trigger("index-change"),i.doValueChanged())):i.content.remove()},index:function(){return this.content.$el.index()},onAddNewClick:function(t){t.preventDefault(),t.stopPropagation(),t.data.self.addNewRow()},onRemoveClick:function(t){t.preventDefault(),t.stopPropagation(),t.data.self.remove()},toggle:function(t){this._super(t),this.$template.find(":input").attr("disabled","disabled")},val:function(o){if(!t.array(o))return this.rows.map(function(t){return t.val()});this.rows.forEach(function(t,e){t.val(e<o.length?o[e]:[])})}}),r.fields.register("conditions-group",r.Conditions.Group,".foofields-type-conditions-group",{allowEmpty:!1},{add:"foofields-conditions-group-empty-add",remove:"foofields-conditions-group-empty-remove",empty:"foofields-empty",types:"foofields-conditions-group-types",operators:"foofields-conditions-group-operators",values:"foofields-conditions-group-values"},{})}((FooFields.$,FooFields),FooFields.utils.is,FooFields.utils.obj),function(l,i,n,u){i.Conditions.Group.Row=i.Component.extend({construct:function(t,e){var o=this;o._super(t.instance,e,t.cls,t.sel),o.parent=t,o.ctnr=t.ctnr,o.$cells=o.$el.children("td,th"),o.fields=o.$cells.children(o.sel.el).map(function(t,e){return i.fields.create(o,e)}).get(),o.regex={id:/(_)-?\d+(_|-?)/gi,name:/(\[)-?\d+(])/gi},o.types=n.find(o.fields,function(t){return t.$el.hasClass(o.cls.types)}),o.operators=n.find(o.fields,function(t){return t.$el.hasClass(o.cls.operators)}),o.values=n.find(o.fields,function(t){return t.$el.hasClass(o.cls.values)}),o.changed=!1},init:function(t){var e=this;e._super(),e.$el.on("index-change.foofields",{self:e},e.onIndexChange),e.fields.forEach(function(t){t.on("change",e.onFieldChange,e),t.init()}),t&&e.reindex()},destroy:function(){var e=this;e.fields.forEach(function(t){t.off("change",e.onFieldChange,e),t.destroy()}),e._super()},remove:function(){this.parent.remove(this)},addNewRow:function(){this.parent.addNewRow(this)},reindex:function(){var o=this,i=o.parent.index(),n=o.$el.index();o.fields.forEach(function(t){t.id=o.update(t.$el,i,n),t.$el.find("[id],[name]").each(function(t,e){o.update(e,i,n)})}),o.trigger("index-change",[n])},update:function(t,i,n){var e,o=(t=u.jq(t)?t:l(t)).prop("id"),s=!0;u.string(o)&&(s=!0,(e=o.replace(this.regex.id,function(t,e,o){return!0===s?(s=!1,e+i+o):e+n+o}))!==o&&(t.prop("id",e),o=e));var r,a=t.prop("name");return u.string(a)&&(s=!0,(r=a.replace(this.regex.name,function(t,e,o){return!0===s?(s=!1,e+i+o):e+n+o}))!==a&&t.prop("name",r)),o},field:function(e){return n.find(this.fields,function(t){return t.id===e})},onIndexChange:function(t){t.data.self.reindex()},onFieldChange:function(){this.changed=!0,this.parent.doValueChanged()},enable:function(){this.fields.forEach(function(t){t.enable()})},val:function(o){var t=this.fields.filter(function(t){return!(t instanceof i.Conditions.Group.RowIndex||t instanceof i.Conditions.Group.DeleteButton)});if(!u.array(o))return t.map(function(t){return t.val()});t.forEach(function(t,e){t.val(e<o.length?o[e]:"")})},getType:function(){return this.types instanceof i.Field?this.types.val():null},getTypeOptions:function(){return this.types instanceof i.Field&&this.types.$el.find(":selected").data("selectize")||{}},getOperator:function(){return this.operators instanceof i.Field?this.operators.val():null},getEndpoint:function(){return this.parent instanceof i.Conditions.Group&&this.parent.content instanceof i.Conditions.Row&&this.parent.content.parent instanceof i.Conditions?window.ajaxurl+"?"+this.parent.content.parent.opt.query:""}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(t,o){t.Conditions.Group.RowIndex=t.Field.extend({setup:function(){this.content.on("index-change",this.onIndexChange,this)},teardown:function(){this.content.off("index-change")},onIndexChange:function(t,e){this.$input.text(o.format(this.opt.format,{index:e,count:e+1}))}}),t.fields.register("conditions-group-index",t.Conditions.Group.RowIndex,".foofields-type-conditions-group-index",{format:"{count}"},{},{})}((FooFields.$,FooFields),(FooFields.utils.is,FooFields.utils.str)),function(n,t,r,a){window.Selectize?(t.Conditions.Group.Selectize=t.Field.extend({setup:function(){var t=this;t.$select=t.$input.children("select").first(),a.extend(t.opt,t.$select.data()),t.$select.removeData("selectize"),t.$select.removeAttr("data-selectize"),t.setupSelectize(!0),t.content.types.on("change",t.onTypeChanged,t)},setupSelectize:function(t){var o=this,i={},e=o.content.getTypeOptions();a.extend(i,o.opt.selectize,e,{onChange:o.onSelectizeChange.bind(o)});var n,s=!1;t&&r.array(o.opt.selectize.items)&&o.opt.selectize.items.length&&(delete o.opt.selectize.items,r.array(i.items)&&0<i.items.length&&(s=!0,o.content.changed=!0)),r.array(i.options)&&0<i.options.length?s||!i.firstSelected||!r.string(i.valueField)||(n=i.options[0]).hasOwnProperty(i.valueField)&&(i.items=[n[i.valueField]]):a.extend(i,{preload:s||i.firstSelected,load:o.onSelectizeLoad.bind(o)}),1!==i.maxItems&&(i.plugins=["remove_button"]),o.api instanceof window.Selectize&&o.api.destroy(),o.api=o.$select.selectize(i).get(0).selectize,i.preload&&o.api instanceof window.Selectize&&o.api.on("load",function(t){var e;r.array(t)&&0<t.length?!s&&i.firstSelected&&r.string(i.valueField)?(e=t[0]).hasOwnProperty(i.valueField)&&o.api.setValue(e[i.valueField]):s&&o.api.setValue(i.items):console.debug(o.i18n.dataInvalid,t)})},teardown:function(){this.api instanceof Selectize&&this.api.destroy()},fetch:function(t){var e=this.content.getType(),o=this.content.getOperator(),i=this.content.getEndpoint();return n.get(i,{q:t,type:e,operator:o})},enable:function(){this.api instanceof Selectize&&this.api.enable()},disable:function(){this.api instanceof Selectize&&this.api.disable()},val:function(t){return this.api?r.undef(t)?this.api.getValue():(this.api.setValue(t),void this.doValueChanged()):""},onTypeChanged:function(){this.setupSelectize()},onSelectizeLoad:function(t,e){this.fetch(t).done(function(t){e(t.results)}).fail(function(){e()})},onSelectizeChange:function(){}}),t.fields.register("conditions-group-selectize",t.Conditions.Group.Selectize,".foofields-type-conditions-group-selectize",{selectize:{preload:!1,delimiter:", ",create:!1,valueField:"id",labelField:"text",searchField:"text",maxItems:null,firstSelected:!1,closeAfterSelect:!0}},{},{dataInvalid:"The selectize load method returned an empty or unexpected data object."})):console.log("FooFields.Conditions.Group.Selectize dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(t,e){t.Conditions.Group.DeleteButton=t.Field.extend({setup:function(){var t=this;t.$button=t.$input.find(t.sel.button).on("click.foofields",{self:t},t.onClick),t.confirmMessage=t.$button.data("confirm")},teardown:function(){this.$button.off(".foofields")},removeRow:function(){(!1===this.content.changed||e.string(this.confirmMessage)&&confirm(this.confirmMessage))&&this.content.remove()},onClick:function(t){t.preventDefault(),t.stopPropagation(),t.data.self.removeRow()}}),t.fields.register("conditions-group-delete",t.Conditions.Group.DeleteButton,".foofields-type-conditions-group-delete",{},{button:"foofields-conditions-group-delete"},{})}((FooFields.$,FooFields),FooFields.utils.is,FooFields.utils.obj),function(t){t.Conditions.Group.AddButton=t.Field.extend({setup:function(){var t=this;t.$button=t.$input.find(t.sel.button).on("click.foofields",{self:t},t.onClick)},teardown:function(){this.$button.off(".foofields")},addNewRow:function(){this.content.addNewRow()},onClick:function(t){t.preventDefault(),t.stopPropagation(),t.data.self.addNewRow()}}),t.fields.register("conditions-group-add",t.Conditions.Group.AddButton,".foofields-type-conditions-group-add",{},{button:"foofields-conditions-group-add"},{})}((FooFields.$,FooFields),(FooFields.utils.is,FooFields.utils.obj)),function(r,s,i,a,l,n){s.Live=i.EventClass.extend({construct:function(){var t=this;t._super(),t.containerId="foobar_notification-settings-container",t.idRegex=/^foobar_notification-settings_(.*?)-field$/,t.nameRegex=/^foobar_notification-settings\[(.*?)]$/,t.nameFormat="foobar_notification-settings[{0}]",t.bar=null,t.opt=null,t.ctnr=null,t.$inputs=null,t.fields=[],t.initialized=!1},register:function(t){return t instanceof s.Live.Field&&((t.live=this).fields.push(t),!0)},init:function(){var e,o,i=this;i.bar=i.getBar(),i.bar instanceof s.Bar&&(i.opt=l.extend({},i.bar.opt),i.bar.$el.removeData("options").removeAttr("data-options"),i.ctnr=FooFields.container(i.containerId),i.ctnr instanceof FooFields.Container&&(e=i.ctnr.activate,i.ctnr.activate=function(t){e.call(i.ctnr,t),i.trigger("tab-changed",[i.ctnr.$state.val()])},i.$inputs=i.ctnr.$el.find(":input"),o=i.getData(),i.fields.forEach(function(t){t.init(o)}),r("style#"+i.bar.id+"_custom").remove(),i.trigger("tab-changed",[i.ctnr.$state.val()]),i.initialized=!0))},getPostId:function(){var t=r("#post_ID");if(0<t.length)return t.val();throw new Error('Unable to find the "#post_ID" element.')},getBar:function(){var e=this.getPostId(),t=s.getAll();return i.find(t,function(t){return n.endsWith(t.id,e)})},getItemByCapability:function(t){var e,o=this;return a.array(t)&&0!==t.length?null!==(e=o.bar.findChild(function(e){return!!a.array(e.capabilities)&&t.some(function(t){return e.capabilities.includes(t)})}))&&void 0!==e?e:o.bar.getFirst():o.bar.item instanceof s.Item?o.bar.item:o.bar.getFirst()},getData:function(){return this.$inputs.serializeArray()},getValue:function(e,t){if(a.string(e)){this.nameRegex.test(e)||(e=n.format(this.nameFormat,e)),a.array(t)||(t=this.getData());var o=i.find(t,function(t){return t.name===e});if(a.hash(o)&&a.string(o.value))return o.value}return null},setClass:function(e,o){this.bar.disableTransitionsTemporarily(function(t){t.removeClass(a.array(o)?o.join(" "):o+"").addClass(e)})},setItemClass:function(t,e){var o=this;o.bar.item instanceof s.Item&&o.bar.disableTransitionsTemporarily(function(){o.bar.item.$el.removeClass(a.array(e)?e.join(" "):e+"").addClass(t)})},addItemClass:function(t){var e=this;e.bar.item instanceof s.Item&&e.bar.disableTransitionsTemporarily(function(){e.bar.item.$el.addClass(a.array(t)?t.join(" "):t+"")})},removeItemClass:function(t){var e=this;e.bar.item instanceof s.Item&&e.bar.disableTransitionsTemporarily(function(){e.bar.item.$el.removeClass(a.array(t)?t.join(" "):t+"")})},toggleItemClass:function(t,e){e?this.addItemClass(t):this.removeItemClass(t)},setIcon:function(o,i){var n=this.bar;n.opt.icons.hasOwnProperty(o)&&n.cls.icons.hasOwnProperty(o)&&s.icons.exists(i,n.opt.svg)&&(n.opt.icons[o]=i,n.$el.find(n.sel.icons[o]).each(function(t,e){r(e).replaceWith(s.icons.get(i,n.opt.svg,[n.cls.icons[o]]))}))},setOption:function(t,e){l.prop(this.opt,t,e)},nl2br:function(t){return t.replace(/(?:\r\n|\r|\n)/g,"<br/>")},setMessage:function(t,e){var o=this;o.bar.item instanceof s.Item&&(t=l.extend({text:null,show_link:null,link_text:null,link_url:null,link_target:null},t),o.setMessageDirect({text:o.getValue(t.text,e),show_link:o.getValue(t.show_link,e),link_text:o.getValue(t.link_text,e),link_url:o.getValue(t.link_url,e),link_target:o.getValue(t.link_target,e)}))},setMessageDirect:function(t){var e;this.bar.item instanceof s.Item&&(t=l.extend({text:null,show_link:null,link_text:null,link_url:null,link_target:null},t),e=this.bar.item.$el.find(".fbr-message"),a.string(t.text)&&e.html(this.nl2br(t.text)),"yes"===t.show_link&&a.string(t.link_text)&&0<t.link_text.length&&e.append(r("<a/>",{text:t.link_text,href:t.link_url,target:t.link_target})))},setButton:function(t,e,o){var i,n=this,s=n.bar.item.$el.find("."+t);"yes"===(e=l.extend({show_button:"yes",icon:null,show_icon:"no",text:null,href:null,target:null,mobile:"fbr-mobile-100"},e)).show_button?0===s.length?(s=r("<a/>",{class:"fbr-button"+(a.string(e.mobile)?" "+e.mobile:"")+" "+t+(o?" fbr-button-secondary":"")+("yes"!==e.show_icon?" fbr-no-icon":""),text:e.text,href:e.href,target:e.target}).prepend(n.bar.icon(e.icon)),0===(i=n.bar.item.$el.find(".fbr-buttons")).length&&(i=r("<div/>",{class:"fbr-buttons"}),n.bar.item.$el.find(".fbr-message").after(i)),o?i.append(s):i.prepend(s)):s.text(e.text).attr({href:e.url,target:e.target}).toggleClass("fbr-button-secondary",o).toggleClass("fbr-no-icon","yes"!==e.show_icon).removeClass("fbr-mobile-33 fbr-mobile-50 fbr-mobile-100").addClass(e.mobile).prepend(n.bar.icon(e.icon)):s.remove()},reinit:function(){var t=this,e=t.bar.$el;t.bar.destroy(),t.bar=s.plugin.createChild(e.data("options",l.extend({},t.opt))),t.bar.init()},redraw:function(){this.bar.opt=l.extend({},this.opt),s.layout(!0)}}),s.live=new s.Live}(FooBar.$,FooBar,FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str),function(o,t,n,e){o.Live.Field=t.Class.extend({construct:function(t,e,o){var i=this;i.id=t,i.capabilities=n.array(e)?e:[],i.targetType=n.fn(o)?o:null,i.live=null,i.field=null,i.initial={}},hasChanged:function(t,e){var o=this.initial.hasOwnProperty(t)&&this.initial[t]===e;return this.initial[t]=e,!o},init:function(t){var e=this;e.live instanceof o.Live&&(e.field=e.live.ctnr.field(e.id),e.field instanceof FooFields.Field&&(e.setup(t),e.field.on("change",e.onChange,e)))},setup:function(){},getValue:function(t,e){return this.live.getValue(t,e)},targetItem:function(){var t=this;if(null!==t.targetType){var e=t.live.bar.getByType(t.targetType);if(e instanceof o.Item)return e}return t.live.getItemByCapability(t.capabilities)},showTarget:function(){var t=this.targetItem();return this.live.bar.item!==t?this.live.bar.goto(t):e.resolve()},applyChange:function(){},finalize:function(t,e){e?this.live.reinit():t&&this.live.redraw()},onChange:function(){var t=this;t.showTarget().then(function(){t.applyChange(t.live.getData())})}})}((FooBar.$,FooBar),FooBar.utils,FooBar.utils.is,FooBar.utils.fn),function(t,e,i){t.Live.CustomizerField=t.Live.Field.extend({construct:function(t,e,o){this._super(t,e,o),this.style=null},hasChanges:function(t){var o=this,i=!1;return e.each(t,function(t,e){o.hasChanged(e,t)&&!i&&(i=!0)}),i},setup:function(t,e){var o=this;o.style=document.createElement("style"),o.style.appendChild(document.createTextNode("")),document.head.appendChild(o.style),i.hash(e)&&(o.initial=e),o.applyChange(t,!0)},getColor:function(t,e){var o=this.getValue(t,e);return null!==o?o:"rgba(0,0,0,0)"},applyChange:function(t,e){this.style.innerHTML=this.toCSS(this.live.bar.id,t,e)},toCSS:function(){throw new Error('A customizer group must have its "toCSS" method overridden in a sub class.')}})}((FooBar.$,FooBar),FooBar.utils,FooBar.utils.is,(FooBar.utils.obj,FooBar.utils.str)),function(o,n){o.Live.CombinedField=o.Live.Field.extend({construct:function(t,e,o){var i=this;i.ids=t,i.capabilities=n.array(e)?e:[],i.targetType=n.fn(o)?o:null,i.live=null,i.fields=[],i.initial={}},init:function(t){var e=this;e.live instanceof o.Live&&n.array(e.ids)&&(e.fields=e.ids.map(function(t){return e.live.ctnr.field(t)}).filter(function(t){return t instanceof FooFields.Field}),1<e.fields.length&&(e.setup(t),e.fields.forEach(function(t){t.on("change",e.onChange,e)})))}})}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is),(FooBar.utils.obj,FooBar.utils.str)),function(t,e,i){t.Live.CombinedCustomizerField=t.Live.CombinedField.extend({construct:function(t,e,o){this._super(t,e,o),this.style=null},hasChanges:function(t){var o=this,i=!1;return e.each(t,function(t,e){o.hasChanged(e,t)&&!i&&(i=!0)}),i},setup:function(t,e){var o=this;o.style=document.createElement("style"),o.style.appendChild(document.createTextNode("")),document.head.appendChild(o.style),i.hash(e)&&(o.initial=e),o.applyChange(t,!0)},getColor:function(t,e){var o=this.getValue(t,e);return null!==o?o:"rgba(0,0,0,0)"},applyChange:function(t,e){this.style.innerHTML=this.toCSS(this.live.bar.id,t,e)},toCSS:function(){throw new Error('A customizer group must have its "toCSS" method overridden in a sub class.')}})}((FooBar.$,FooBar),FooBar.utils,FooBar.utils.is,(FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_Background=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_custom_color_background_field_group-field")},setup:function(t){var e=this;e._super(t,{type:e.getValue("custom_color_background_type",t),solid:e.getColor("custom_color_background_solid",t),gradient_from:e.getColor("custom_color_background_gradient_from",t),gradient_to:e.getColor("custom_color_background_gradient_to",t),gradient_type:e.getValue("custom_color_background_gradient_type",t),gradient_angle:e.getValue("custom_color_background_gradient_angle",t)})},toCSS:function(t,e){var o=this,i=o.getValue("custom_color_background_type",e),n=o.getColor("custom_color_background_solid",e),s=o.getColor("custom_color_background_gradient_from",e),r=o.getColor("custom_color_background_gradient_to",e),a=o.getValue("custom_color_background_gradient_type",e),l=o.getValue("custom_color_background_gradient_angle",e),u="";switch(i){case"solid":u+="\n#"+t+".fbr-custom-color .fbr-content {",u+="\n\tbackground-color: "+n+";",u+="\n}";break;case"gradient":u+="\n#"+t+".fbr-custom-color .fbr-content {",u+="\n\tbackground: "+s+";",u+="\n\tbackground: "+a+"-gradient("+("linear"===a?l+"deg":"circle")+", "+s+" 0%, "+r+" 100%);",u+="\n}"}return u}}),t.live.register(new t.Live.Appearance_Customizer_Background)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_Border=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_custom_color_border_field_group-field",["has_border"])},setup:function(t){this._super(t,{color:this.getValue("custom_color_border_color",t)})},toCSS:function(t,e){var o="";return o+="\n#"+t+".fbr-custom-color .fbr-side-border {",o+="\n\tborder-color: "+this.getValue("custom_color_border_color",e)+";",o+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_Border)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_Button=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_custom_color_button_field_group-field",["has_buttons","has_button"])},setup:function(t){var e=this;e._super(t,{background:e.getColor("custom_color_button_background",t),text:e.getColor("custom_color_button_text",t),hover_background:e.getColor("custom_color_button_hover_background",t),hover_text:e.getColor("custom_color_button_hover_text",t)})},toCSS:function(t,e){var o="";return o+="\n#"+t+".fbr-custom-color .fbr-button {",o+="\n\tbackground-color: "+this.getColor("custom_color_button_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_button_text",e)+";",o+="\n}",o+="\n#"+t+".fbr-custom-color .fbr-button:hover {",o+="\n\tbackground-color: "+this.getColor("custom_color_button_hover_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_button_hover_text",e)+";",o+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_Button)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_ButtonSecondary=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_custom_color_button_secondary_field_group-field",["has_buttons","has_button_secondary"])},setup:function(t){var e=this;e._super(t,{background:e.getColor("custom_color_button_secondary_background",t),text:e.getColor("custom_color_button_secondary_text",t),hover_background:e.getColor("custom_color_button_secondary_hover_background",t),hover_text:e.getColor("custom_color_button_secondary_hover_text",t)})},toCSS:function(t,e){var o="";return o+="\n#"+t+".fbr-custom-color .fbr-button.fbr-button-secondary {",o+="\n\tbackground-color: "+this.getColor("custom_color_button_secondary_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_button_secondary_text",e)+";",o+="\n}",o+="\n#"+t+".fbr-custom-color .fbr-button.fbr-button-secondary:hover {",o+="\n\tbackground-color: "+this.getColor("custom_color_button_secondary_hover_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_button_secondary_hover_text",e)+";",o+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_ButtonSecondary)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_NextButton=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_custom_color_next_field_group-field")},setup:function(t){var e=this;e._super(t,{background:e.getColor("custom_color_next_background",t),icon:e.getColor("custom_color_next_icon",t),hover_background:e.getColor("custom_color_next_hover_background",t),hover_icon:e.getColor("custom_color_next_hover_icon",t)})},toCSS:function(t,e){var o="";return o+="\n#"+t+".fbr-custom-color .fbr-next {",o+="\n\tbackground-color: "+this.getColor("custom_color_next_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_next_icon",e)+";",o+="\n}",o+="\n#"+t+".fbr-custom-color .fbr-next:hover {",o+="\n\tbackground-color: "+this.getColor("custom_color_next_hover_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_next_hover_icon",e)+";",o+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_NextButton)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_PreviousButton=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_custom_color_prev_field_group-field")},setup:function(t){var e=this;e._super(t,{background:e.getColor("custom_color_prev_background",t),icon:e.getColor("custom_color_prev_icon",t),hover_background:e.getColor("custom_color_prev_hover_background",t),hover_icon:e.getColor("custom_color_prev_hover_icon",t)})},toCSS:function(t,e){var o="";return o+="\n#"+t+".fbr-custom-color .fbr-prev {",o+="\n\tbackground-color: "+this.getColor("custom_color_next_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_next_icon",e)+";",o+="\n}",o+="\n#"+t+".fbr-custom-color .fbr-prev:hover {",o+="\n\tbackground-color: "+this.getColor("custom_color_next_hover_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_next_hover_icon",e)+";",o+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_PreviousButton)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_TextAndLinks=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_custom_color_text_field_group-field")},setup:function(t){this._super(t,{text:this.getColor("custom_color_text",t),link:this.getColor("custom_color_link",t),link_hover:this.getColor("custom_color_link_hover",t)})},toCSS:function(t,e){var o="";return o+="\n#"+t+".fbr-custom-color .fbr-content {",o+="\n\tcolor: "+this.getColor("custom_color_text",e)+";",o+="\n}",o+="\n#"+t+".fbr-custom-color .fbr-message a {",o+="\n\tcolor: "+this.getColor("custom_color_link",e)+";",o+="\n}",o+="\n#"+t+".fbr-custom-color .fbr-message a:hover {",o+="\n\tcolor: "+this.getColor("custom_color_link_hover",e)+";",o+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_TextAndLinks)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_TextInput=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_custom_color_text_input_field_group-field",["has_inputs","has_text_input"])},setup:function(t){this._super(t,{background:this.getColor("custom_color_text_input_background",t),text:this.getColor("custom_color_text_input_text",t),placeholder:this.getColor("custom_color_text_input_placeholder",t)})},toCSS:function(t,e){var o="";return o+="\n#"+t+".fbr-custom-color .fbr-item .fbr-input {",o+="\n\tbackground-color: "+this.getColor("custom_color_text_input_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_text_input_text",e)+";",o+="\n}",o+="\n#"+t+".fbr-custom-color .fbr-item .fbr-input::placeholder {",o+="\n\tcolor: "+this.getColor("custom_color_text_input_placeholder",e)+";",o+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_TextInput)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_TextInputWithButton=t.Live.CombinedCustomizerField.extend({construct:function(){this._super(["foobar_notification-settings_custom_color_text_input_background-field","foobar_notification-settings_custom_color_button_background-field"],["has_input_with_button"])},setup:function(t){this._super(t,{text:this.getColor("custom_color_text_input_background",t),button:this.getColor("custom_color_button_background",t)})},toCSS:function(t,e){var o=this.getColor("custom_color_text_input_background",e),i=this.getColor("custom_color_button_background",e),n="";return n+="\n#"+t+".fbr-custom-color .fbr-item .fbr-input-with-button:before,",n+="\n#"+t+".fbr-custom-color .fbr-item .fbr-input-with-button:after {",n+="\n\tbackground: -webkit-gradient(linear, left top, right top, from("+o+"), color-stop(12em, "+o+"), color-stop(12em, "+i+"), to("+i+"));",n+="\n\tbackground: linear-gradient(to right, "+o+", "+o+" 12em, "+i+" 12em, "+i+");",n+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_TextInputWithButton)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Customizer_ToggleButton=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_custom_color_toggle_field_group-field")},setup:function(t){var e=this;e._super(t,{background:e.getColor("custom_color_toggle_background",t),icon:e.getColor("custom_color_toggle_icon",t),hover_background:e.getColor("custom_color_toggle_hover_background",t),hover_icon:e.getColor("custom_color_toggle_hover_icon",t)})},toCSS:function(t,e){var o="";return o+="\n#"+t+".fbr-custom-color .fbr-toggle {",o+="\n\tbackground-color: "+this.getColor("custom_color_toggle_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_toggle_icon",e)+";",o+="\n}",o+="\n#"+t+".fbr-custom-color .fbr-toggle:hover {",o+="\n\tbackground-color: "+this.getColor("custom_color_toggle_hover_background",e)+";",o+="\n\tcolor: "+this.getColor("custom_color_toggle_hover_icon",e)+";",o+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_ToggleButton)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(o,s){o.Live.Appearance_Effects=o.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_effects_field_group-field"),this.effects=["fbr-att-bounce","fbr-att-heartbeat","fbr-att-pulse","fbr-att-ripple","fbr-att-wiggle"]},setup:function(t){this.initial={toggle:this.getValue("effect_toggle",t),button:this.getValue("effect_button",t),enabled:this.getValue("effect_enabled")}},applyChange:function(t){var e=this,o=e.getValue("effect_toggle",t),i=e.getValue("effect_button",t),n=e.getValue("effect_enabled",t),s=!1,r=!1;e.hasChanged("toggle",o)&&(e.setEffectClass("toggle",o,e.effects),s=!0),e.hasChanged("button",i)&&("sign-up"===e.live.bar.name?e.setEffectClass("input-with-button",i,e.effects):e.setEffectClass("button",i,e.effects),s=!0),e.hasChanged("enabled",n)&&(e.live.setOption("disableEffects","interaction"===n),r=!0),e.finalize(s,r)},getItemElement:function(t){if(this.live.bar.item instanceof o.Item){var e=this.live.bar.item.$el.find(t).first();if(0<e.length)return e}return null},setEffectClass:function(t,e,o){var i=this,n=null;switch(t){case"toggle":n=i.live.bar.$toggle;break;case"button":n=i.getItemElement(".fbr-button");break;case"button-secondary":n=i.getItemElement(".fbr-button-secondary");break;case"input":n=i.getItemElement(".fbr-input");break;case"input-with-button":n=i.getItemElement(".fbr-input-with-button")}s.jq(n)&&i.live.bar.disableTransitionsTemporarily(function(){n.removeClass(s.array(o)?o.join(" "):o+"").addClass(e)})}}),o.live.register(new o.Live.Appearance_Effects)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is),(FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_General=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_appearance_group-field"),this.colors=["fbr-blue","fbr-green","fbr-purple","fbr-red","fbr-orange","fbr-yellow","fbr-dark","fbr-light","fbr-custom-color"],this.font_sizes=["fbr-font-14px","fbr-font-16px","fbr-font-18px","fbr-font-20px","fbr-font-22px","fbr-font-24px"],this.transitions=["fbr-transition-slide","fbr-transition-fade","fbr-transition-slide-fade"]},setup:function(t){this.initial={color:this.getValue("color",t),font_size:this.getValue("font_size",t),transition:this.getValue("transition",t)}},applyChange:function(t){var e=this,o=e.getValue("color",t),i=e.getValue("font_size",t),n=e.getValue("transition",t),s=!1;e.hasChanged("color",o)&&(e.live.setClass(o,e.colors),s=!0),e.hasChanged("font_size",i)&&(e.live.setClass(i,e.font_sizes),s=!0),e.hasChanged("transition",n)&&(e.live.setClass(n,e.transitions),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Appearance_General)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Icons_Nav=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_icons_navigation_field_group-field")},setup:function(t){this.initial={prev:this.getValue("nav_icon_prev",t),next:this.getValue("nav_icon_next",t)}},applyChange:function(t){var e=this,o=e.getValue("nav_icon_prev",t),i=e.getValue("nav_icon_next",t);e.hasChanged("prev",o)&&e.live.setIcon("prev",o),e.hasChanged("next",i)&&e.live.setIcon("next",i)}}),t.live.register(new t.Live.Appearance_Icons_Nav)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Icons_Toggle=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_icons_field_group-field")},setup:function(t){this.initial={expand:this.getValue("toggle_icon_expand",t),collapse:this.getValue("toggle_icon_collapse",t),dismiss:this.getValue("toggle_icon_dismiss",t)}},applyChange:function(t){var e=this,o=e.getValue("toggle_icon_expand",t),i=e.getValue("toggle_icon_collapse",t),n=e.getValue("toggle_icon_dismiss",t);e.hasChanged("expand",o)&&e.live.setIcon("expand",o),e.hasChanged("collapse",i)&&e.live.setIcon("collapse",i),e.hasChanged("dismiss",n)&&e.live.setIcon("dismiss",n)}}),t.live.register(new t.Live.Appearance_Icons_Toggle)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_Announcement_Link=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_announcement_link_group-field")},setup:function(t){this.initial={text:this.getValue("message_link_text",t),url:this.getValue("message_link_url",t),target:this.getValue("message_link_target",t)}},applyChange:function(t){var e=this,o=e.getValue("message_link_text",t),i=e.getValue("message_link_url",t),n=e.getValue("message_link_target",t),s=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.setMessage({text:"message_text",show_link:"message_show_link",link_text:"message_link_text",link_url:"message_link_url",link_target:"message_link_target"},t),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Content_Announcement_Link)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_Announcement_Message=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_announcement_group-field")},setup:function(t){this.initial={text:this.getValue("message_text",t),show_link:this.getValue("message_show_link",t)}},applyChange:function(t){var e=this,o=e.getValue("message_text",t),i=e.getValue("message_show_link",t),n=!1;(e.hasChanged("text",o)||e.hasChanged("show_link",i))&&(e.live.setMessage({text:"message_text",show_link:"message_show_link",link_text:"message_link_text",link_url:"message_link_url",link_target:"message_link_target"},t),n=!0),e.finalize(n,!1)}}),t.live.register(new t.Live.Content_Announcement_Message)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(l,t){t.Live.Content_Cookie_Button=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_cookie_button_group-field"),this.positions=["fbr-buttons-left","fbr-buttons-right"]},setup:function(t){this.initial={text:this.getValue("cookie_button_text",t),position:this.getValue("cookie_button_position",t),show_decline:this.getValue("cookie_show_decline_button",t)}},applyChange:function(t){var e,o,i=this,n=i.getValue("cookie_button_text",t),s=i.getValue("cookie_button_position",t),r=i.getValue("cookie_show_decline_button",t),a=!1;i.hasChanged("text",n)&&(i.live.bar.item.$el.find(".fbr-button:first").text(n),a=!0),i.hasChanged("position",s)&&(i.live.setItemClass(s,i.positions),a=!0),i.hasChanged("show_decline",r)&&(e=i.live.bar.item.$el.find(".fbr-button-secondary:first"),"yes"===r?(o={text:i.getValue("cookie_decline_button_text"),href:i.getValue("cookie_decline_button_url"),target:i.getValue("cookie_decline_button_target")},0===e.length?(e=l("<a/>",{class:"fbr-button fbr-mobile-100 fbr-button-secondary",text:o.text,href:o.href,target:o.target}),i.live.bar.item.$el.find(".fbr-button:first").after(e)):e.text(o.text).attr({href:o.url,target:o.target})):e.remove(),a=!0),i.finalize(a,!1)}}),t.live.register(new t.Live.Content_Cookie_Button)}(FooBar.$,FooBar,(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_Cookie_ButtonSecondary=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_cookie_decline_button_group-field")},setup:function(t){this.initial={text:this.getValue("cookie_decline_button_text",t),url:this.getValue("cookie_decline_button_url",t),target:this.getValue("cookie_decline_button_target",t)}},applyChange:function(t){var e=this,o=e.getValue("cookie_decline_button_text",t),i=e.getValue("cookie_decline_button_url",t),n=e.getValue("cookie_decline_button_target",t),s=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.bar.item.$el.find(".fbr-button-secondary:first").attr({href:i,target:n}).text(o),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Content_Cookie_ButtonSecondary)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_Cookie_PolicyLink=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_cookie_policy_link_group-field")},setup:function(t){this.initial={text:this.getValue("cookie_policy_link_text",t),url:this.getValue("cookie_policy_link_url",t),target:this.getValue("cookie_policy_link_target",t)}},applyChange:function(t){var e=this,o=e.getValue("cookie_policy_link_text",t),i=e.getValue("cookie_policy_link_url",t),n=e.getValue("cookie_policy_link_target",t),s=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.setMessage({text:"cookie_notice",show_link:"cookie_show_policy_link",link_text:"cookie_policy_link_text",link_url:"cookie_policy_link_url",link_target:"cookie_policy_link_target"},t),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Content_Cookie_PolicyLink)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_Cookie_Message=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_cookie_group-field")},setup:function(t){this.initial={text:this.getValue("cookie_notice",t),show_link:this.getValue("cookie_show_policy_link",t)}},applyChange:function(t){var e=this,o=e.getValue("cookie_notice",t),i=e.getValue("cookie_show_policy_link",t),n=!1;(e.hasChanged("text",o)||e.hasChanged("show_link",i))&&(e.live.setMessage({text:"cookie_notice",show_link:"cookie_show_policy_link",link_text:"cookie_policy_link_text",link_url:"cookie_policy_link_url",link_target:"cookie_policy_link_target"},t),n=!0),e.finalize(n,!1)}}),t.live.register(new t.Live.Content_Cookie_Message)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_Countdown_Button=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_countdown_button_field_group-field",null,t.Item.Countdown),this.positions=["fbr-button-before-message","fbr-button-after-message"]},setup:function(t){var e=this;e.initial={text:e.getValue("countdown_button_text",t),url:e.getValue("countdown_button_url",t),target:e.getValue("countdown_button_target",t),position:e.getValue("countdown_button_position",t)}},applyChange:function(t){var e=this,o=e.getValue("countdown_button_text",t),i=e.getValue("countdown_button_url",t),n=e.getValue("countdown_button_target",t),s=e.getValue("countdown_button_position",t),r=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.bar.item.$el.find(".fbr-button:first").attr({href:i,target:n}).text(o),r=!0),e.hasChanged("position",s)&&(e.live.setItemClass(s,e.positions),r=!0),e.finalize(r,!1)}}),t.live.register(new t.Live.Content_Countdown_Button)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(o,u){u.Live.Content_Countdown_Countdown=u.Live.Field.extend({construct:function(){var t=this;t._super("foobar_notification-settings_countdown_countdown_field_group-field",null,u.Item.Countdown),t.styles=["fbr-countdown-boxed","fbr-countdown-digital"],t.SECOND_IN_MS=1e3,t.MINUTE_IN_MS=60*t.SECOND_IN_MS,t.HOUR_IN_MS=60*t.MINUTE_IN_MS,t.DAY_IN_MS=24*t.HOUR_IN_MS,t.$fixed=null},setup:function(t){var e=this;e.initial={mode:e.getValue("countdown_countdown_type",t),fixed:e.getTimestamp(t),relative:e.getTime(t),style:e.getValue("countdown_countdown_style",t)},e.$fixed=o("#foobar_notification-settings_countdown_countdown_timestamp-field")},applyChange:function(t){var e,o,i,n,s,r,a=this,l=a.live.bar.item;l instanceof u.Item.Countdown&&(e=a.getValue("countdown_countdown_type",t),o=a.getTimestamp(t),i=a.getTime(t),n=a.getValue("countdown_countdown_style",t),s=!1,"timestamp"===e&&(a.hasChanged("mode",e)||a.hasChanged("fixed",o))&&((r=o<Date.now())||(l.target=o,l.isRunning||l.start(),s=!0),a.$fixed.toggleClass("foofields-error",r)),"time"===e&&(a.hasChanged("mode",e)||a.hasChanged("relative",i))&&(l.target=Date.now()+i,l.isRunning||l.start(),s=!0),a.hasChanged("style",n)&&(a.live.setItemClass(n,a.styles),s=!0),a.finalize(s,!1))},getTimestamp:function(t){var e=this.getValue("foobar_notification-settings[countdown_countdown_timestamp][date]",t),o=this.getValue("foobar_notification-settings[countdown_countdown_timestamp][hours]",t),i=this.getValue("foobar_notification-settings[countdown_countdown_timestamp][minutes]",t),n=new Date(e);return n.setHours(o,i),n.getTime()},getTime:function(t){var e=this,o=e.getValue("foobar_notification-settings[countdown_countdown_time][days]",t),i=e.getValue("foobar_notification-settings[countdown_countdown_time][hours]",t),n=e.getValue("foobar_notification-settings[countdown_countdown_time][minutes]",t),s=e.getValue("foobar_notification-settings[countdown_countdown_time][seconds]",t);return o*e.DAY_IN_MS+i*e.HOUR_IN_MS+n*e.MINUTE_IN_MS+s*e.SECOND_IN_MS}}),u.live.register(new u.Live.Content_Countdown_Countdown)}(FooBar.$,FooBar,(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(e){e.Live.Content_Countdown_ExpiredMessage=e.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_countdown_expired_field_group-field"),this.target=null},setup:function(t){var o=this;o.initial={text:o.getValue("countdown_expired_text",t),duration:o.getValue("countdown_expired_duration",t)},o.target=o.live.bar.getByType(e.Item.CountdownExpired),o.target instanceof e.Item.CountdownExpired&&(o.target.opt.timeoutAction="resetTimeout"),o.live.on("tab-changed",function(t,e){"foobar_notification-settings_content_countdown_expired-content"===e&&o.showTarget()})},targetItem:function(){return this.target},applyChange:function(t){var e,o=this,i=o.getValue("countdown_expired_text",t),n=o.getValue("countdown_expired_duration",t),s=!1;o.hasChanged("text",i)&&(o.live.setMessage({text:"countdown_expired_text"},t),s=!0),o.hasChanged("duration",n)&&(e=parseInt(n),isNaN(e)&&(e=0),e*=1e3,o.live.bar.item.setTimeout(e),s=!0),o.finalize(s,!1)}}),e.live.register(new e.Live.Content_Countdown_ExpiredMessage)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_Countdown_Link=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_countdown_link_field_group-field",null,t.Item.Countdown)},setup:function(t){this.initial={text:this.getValue("countdown_link_text",t),url:this.getValue("countdown_link_url",t),target:this.getValue("countdown_link_target",t)}},applyChange:function(t){var e=this,o=e.getValue("countdown_link_text",t),i=e.getValue("countdown_link_url",t),n=e.getValue("countdown_link_target",t),s=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.setMessage({text:"countdown_text",show_link:"countdown_show_link",link_text:"countdown_link_text",link_url:"countdown_link_url",link_target:"countdown_link_target"},t),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Content_Countdown_Link)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_Countdown_Message=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_countdown_message_field_group-field",null,t.Item.Countdown),this.positions=["fbr-message-before-countdown","fbr-message-after-countdown"]},setup:function(t){var o=this;o.initial={text:o.getValue("countdown_text",t),position:o.getValue("countdown_message_position",t),show_link:o.getValue("countdown_show_link",t)},o.live.on("tab-changed",function(t,e){"foobar_notification-settings_content-countdown-content"===e&&o.showTarget()})},applyChange:function(t){var e=this,o=e.getValue("countdown_text",t),i=e.getValue("countdown_message_position",t),n=e.getValue("countdown_show_link",t),s=!1;(e.hasChanged("text",o)||e.hasChanged("show_link",n))&&(e.live.setMessage({text:"countdown_text",show_link:"countdown_show_link",link_text:"countdown_link_text",link_url:"countdown_link_url",link_target:"countdown_link_target"},t),s=!0),e.hasChanged("position",i)&&(e.live.setItemClass(i,e.positions),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Content_Countdown_Message)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_CTA_Button=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_cta_button_group-field"),this.positions=["fbr-buttons-left","fbr-buttons-right"]},setup:function(t){var e=this;e.initial={text:e.getValue("cta_button_text",t),url:e.getValue("cta_button_url",t),target:e.getValue("cta_button_target",t),position:e.getValue("cta_button_position",t)}},applyChange:function(t){var e=this,o=e.getValue("cta_button_text",t),i=e.getValue("cta_button_url",t),n=e.getValue("cta_button_target",t),s=e.getValue("cta_button_position",t),r=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.bar.item.$el.find(".fbr-button:first").attr({href:i,target:n}).text(o),r=!0),e.hasChanged("position",s)&&(e.live.setItemClass(s,e.positions),r=!0),e.finalize(r,!1)}}),t.live.register(new t.Live.Content_CTA_Button)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_CTA_Link=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_cta_link_group-field")},setup:function(t){this.initial={text:this.getValue("cta_link_text",t),url:this.getValue("cta_link_url",t),target:this.getValue("cta_link_target",t)}},applyChange:function(t){var e=this,o=e.getValue("cta_link_text",t),i=e.getValue("cta_link_url",t),n=e.getValue("cta_link_target",t),s=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.setMessage({text:"cta_text",show_link:"cta_show_link",link_text:"cta_link_text",link_url:"cta_link_url",link_target:"cta_link_target"},t),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Content_CTA_Link)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_CTA_Message=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_cta_group-field")},setup:function(t){this.initial={text:this.getValue("cta_text",t),show_link:this.getValue("cta_show_link",t)}},applyChange:function(t){var e=this,o=e.getValue("cta_text",t),i=e.getValue("cta_show_link",t),n=!1;(e.hasChanged("text",o)||e.hasChanged("show_link",i))&&(e.live.setMessage({text:"cta_text",show_link:"cta_show_link",link_text:"cta_link_text",link_url:"cta_link_url",link_target:"cta_link_target"},t),n=!0),e.finalize(n,!1)}}),t.live.register(new t.Live.Content_CTA_Message)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(i,o,n){i.Live.freeShippingData=function(t){var e={target:50,str_target:"$50.00",current:30,str_current:"$30.00",percent:.6,str_percent:"60%"};return t instanceof i.Bar.FreeShipping&&o.hash(t.opt.data)&&n.extend(e,t.opt.data),e},i.Live.freeShippingFormat=function(t,e){var o=i.Live.freeShippingData(e);return t.replace(/(?<![a-z])\$(target|current|percent)(?![a-z])/g,function(t,e){switch(e){case"target":return o.str_target;case"current":return o.str_current;case"percent":return o.str_percent;default:return t}})}}(FooBar,FooBar.utils.is,FooBar.utils.obj),function(t){t.Live.Appearance_Customizer_FreeShipping=t.Live.CustomizerField.extend({construct:function(){this._super("foobar_notification-settings_free_shipping_progress_progress_bar_field_group-field",["has_progress_bar"],t.Item.FreeShippingProgress)},setup:function(t){var e=this;e._super(t,{background:e.getValue("free_shipping_progress_progress_bar_background",t),fill:e.getValue("free_shipping_progress_progress_bar_fill",t),text:e.getValue("free_shipping_progress_progress_bar_text",t),icon:e.getValue("free_shipping_progress_progress_bar_icon",t),border_size:e.getValue("free_shipping_progress_progress_bar_border_size",t),border_radius:e.getValue("free_shipping_progress_progress_bar_border_radius",t)})},applyChange:function(t,e){this._super(t,e),this.finalize(!0,!1)},toCSS:function(t,e){var o=this,i="";return i+="\n#"+t+".fbr-custom-color .fbr-progress-bar {",i+="\n\t--foobar-progress-background-color: "+o.getValue("free_shipping_progress_progress_bar_background",e)+";",i+="\n\t--foobar-progress-fill-color: "+o.getValue("free_shipping_progress_progress_bar_fill",e)+";",i+="\n\t--foobar-progress-text-color: "+o.getValue("free_shipping_progress_progress_bar_text",e)+";",i+="\n\t--foobar-progress-icon-color: "+o.getValue("free_shipping_progress_progress_bar_icon",e)+";",i+="\n\t--foobar-progress-border-size: "+o.getValue("free_shipping_progress_progress_bar_border_size",e)+"px;",i+="\n\t--foobar-progress-border-radius: "+o.getValue("free_shipping_progress_progress_bar_border_radius",e)+"px;",i+="\n}"}}),t.live.register(new t.Live.Appearance_Customizer_FreeShipping)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Appearance_Icons_FreeShipping=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_icons_free_shipping_field_group-field",["has_buttons"],t.Item.FreeShippingQualified)},setup:function(t){this.initial={progress:this.getValue("free_shipping_icon_progress",t),cart:this.getValue("free_shipping_icon_cart",t),checkout:this.getValue("free_shipping_icon_checkout",t)}},applyChange:function(t){var e=this,o=e.getValue("free_shipping_icon_progress",t),i=e.getValue("free_shipping_icon_cart",t),n=e.getValue("free_shipping_icon_checkout",t);e.hasChanged("progress",o)&&e.live.setIcon("progress",o),e.hasChanged("cart",i)&&e.live.setIcon("cart",i),e.hasChanged("checkout",n)&&e.live.setIcon("checkout",n)}}),t.live.register(new t.Live.Appearance_Icons_FreeShipping)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(r){r.Live.Content_FreeShipping_Link=r.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_free_shipping_initial_link_field_group-field")},setup:function(t){this.initial={text:this.getValue("free_shipping_initial_link_text",t),url:this.getValue("free_shipping_initial_link_url",t),target:this.getValue("free_shipping_initial_link_target",t)}},applyChange:function(t){var e=this,o=e.getValue("free_shipping_initial_link_text",t),i=e.getValue("free_shipping_initial_link_url",t),n=e.getValue("free_shipping_initial_link_target",t),s=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.setMessageDirect({text:r.Live.freeShippingFormat(e.getValue("free_shipping_initial_text",t),e.live.bar),show_link:e.getValue("free_shipping_initial_show_link",t),link_text:o,link_url:i,link_target:n},t),s=!0),e.finalize(s,!1)}}),r.live.register(new r.Live.Content_FreeShipping_Link)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(s){s.Live.Content_FreeShipping_Message=s.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_free_shipping_initial_group-field")},setup:function(t){var o=this;o.initial={text:o.getValue("free_shipping_initial_text",t),show_link:o.getValue("free_shipping_initial_show_link",t)},o.live.on("tab-changed",function(t,e){"foobar_notification-settings_content_free_shipping-content"===e&&o.showTarget()})},applyChange:function(t){var e=this,o=e.getValue("free_shipping_initial_text",t),i=e.getValue("free_shipping_initial_show_link",t),n=!1;(e.hasChanged("text",o)||e.hasChanged("show_link",i))&&(e.live.setMessageDirect({text:s.Live.freeShippingFormat(o,e.live.bar),show_link:i,link_text:e.live.getValue("free_shipping_initial_link_text",t),link_url:e.live.getValue("free_shipping_initial_link_url",t),link_target:e.live.getValue("free_shipping_initial_link_target",t)},t),n=!0),e.finalize(n,!1)}}),s.live.register(new s.Live.Content_FreeShipping_Message)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(s){s.Live.Content_FreeShipping_ProgressBar=s.Live.Field.extend({construct:function(){var t=this;t._super("foobar_notification-settings_free_shipping_progress_progress_bar_group-field",["has_progress_bar"],s.Item.FreeShippingProgress),t._contentValues=["icon-only","text-only","icon-and-text"],t._contentClasses=t._contentValues.reduce(function(t,e){return t.push("fbr-progress-"+e),t},[]).join(" "),t._sizeValues=["medium","small"],t._sizeClasses=t._sizeValues.reduce(function(t,e){return t.push("fbr-progress-"+e),t},[]).join(" ")},setup:function(t){this.initial={content:this.getValue("free_shipping_progress_progress_bar_content",t),size:this.getValue("free_shipping_progress_progress_bar_size",t)}},applyChange:function(t){var e=this,o=e.getValue("free_shipping_progress_progress_bar_content",t),i=e.getValue("free_shipping_progress_progress_bar_size",t),n=!1;e.hasChanged("content",o)&&e.live.bar.item instanceof s.Item.FreeShippingProgress&&(e.live.bar.item.$progress.removeClass(e._contentClasses),e._contentValues.includes(o)&&e.live.bar.item.$progress.addClass("fbr-progress-"+o),n=!0),e.hasChanged("size",i)&&e.live.bar.item instanceof s.Item.FreeShippingProgress&&(e.live.bar.item.$progress.removeClass(e._sizeClasses),e._sizeValues.includes(i)&&e.live.bar.item.$progress.addClass("fbr-progress-"+i),n=!0),e.finalize(n,!1)}}),s.live.register(new s.Live.Content_FreeShipping_ProgressBar)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(s){s.Live.Content_FreeShipping_ProgressMessage=s.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_free_shipping_progress_group-field",["has_progress_bar"],s.Item.FreeShippingProgress)},setup:function(t){var o=this;o.initial={text:o.getValue("free_shipping_progress_text",t),show_progress_bar:o.getValue("free_shipping_progress_show_progress_bar",t)},o.live.on("tab-changed",function(t,e){"foobar_notification-settings_content_free_shipping_progress-content"===e&&o.showTarget()})},applyChange:function(t){var e=this,o=e.getValue("free_shipping_progress_text",t),i=e.getValue("free_shipping_progress_show_progress_bar",t),n=!1;e.hasChanged("text",o)&&(e.live.setMessageDirect({text:s.Live.freeShippingFormat(o,e.live.bar)},t),n=!0),e.hasChanged("show_progress_bar",i)&&(e.live.toggleItemClass("fbr-hide-progress-bar","no"===i),n=!0),e.finalize(n,!1)}}),s.live.register(new s.Live.Content_FreeShipping_ProgressMessage)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_FreeShipping_QualifiedCartButton=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_free_shipping_qualified_cart_button_group-field",["has_buttons"],t.Item.FreeShippingQualified)},setup:function(t){var e=this;e.initial={show_button:e.getValue("free_shipping_qualified_show_cart_button",t),icon:e.getValue("free_shipping_icon_cart",t),show_icon:e.getValue("free_shipping_qualified_cart_button_show_icon",t),text:e.getValue("free_shipping_qualified_cart_button_text",t),href:e.getValue("free_shipping_qualified_cart_button_url",t),target:e.getValue("free_shipping_qualified_cart_button_target",t)}},applyChange:function(t){var e=this,o=e.getValue("free_shipping_qualified_show_cart_button",t),i=e.getValue("free_shipping_qualified_show_checkout_button",t),n={show_button:o,icon:e.getValue("free_shipping_icon_cart",t),show_icon:e.getValue("free_shipping_qualified_cart_button_show_icon",t),text:e.getValue("free_shipping_qualified_cart_button_text",t),href:e.getValue("free_shipping_qualified_cart_button_url",t),target:e.getValue("free_shipping_qualified_cart_button_target",t),mobile:"yes"===o&&"yes"===i?"fbr-mobile-50":"fbr-mobile-100"},s=!1;(e.hasChanged("show_button",n.show_button)||e.hasChanged("icon",n.icon)||e.hasChanged("show_icon",n.show_icon)||e.hasChanged("text",n.text)||e.hasChanged("href",n.href)||e.hasChanged("target",n.target))&&(e.live.setButton("fbr-button-cart",n,!1),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Content_FreeShipping_QualifiedCartButton)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_FreeShipping_QualifiedCheckoutButton=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_free_shipping_qualified_checkout_button_group-field",["has_buttons"],t.Item.FreeShippingQualified)},setup:function(t){var e=this;e.initial={show_button:e.getValue("free_shipping_qualified_show_checkout_button",t),icon:e.getValue("free_shipping_icon_checkout",t),show_icon:e.getValue("free_shipping_qualified_checkout_button_show_icon",t),text:e.getValue("free_shipping_qualified_checkout_button_text",t),href:e.getValue("free_shipping_qualified_checkout_button_url",t),target:e.getValue("free_shipping_qualified_checkout_button_target",t)}},applyChange:function(t){var e=this,o=e.getValue("free_shipping_qualified_show_cart_button",t),i=e.getValue("free_shipping_qualified_show_checkout_button",t),n={show_button:i,icon:e.getValue("free_shipping_icon_checkout",t),show_icon:e.getValue("free_shipping_qualified_checkout_button_show_icon",t),text:e.getValue("free_shipping_qualified_checkout_button_text",t),href:e.getValue("free_shipping_qualified_checkout_button_url",t),target:e.getValue("free_shipping_qualified_checkout_button_target",t),mobile:"yes"===o&&"yes"===i?"fbr-mobile-50":"fbr-mobile-100"},s=!1;(e.hasChanged("show_button",n.show_button)||e.hasChanged("icon",n.icon)||e.hasChanged("show_icon",n.show_icon)||e.hasChanged("text",n.text)||e.hasChanged("href",n.href)||e.hasChanged("target",n.target))&&(e.live.setButton("fbr-button-checkout",n,"yes"===o),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Content_FreeShipping_QualifiedCheckoutButton)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(l){l.Live.Content_FreeShipping_QualifiedMessage=l.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_free_shipping_qualified_group-field",["has_buttons"],l.Item.FreeShippingQualified)},setup:function(t){var o=this;o.initial={text:o.getValue("free_shipping_qualified_text",t),show_cart_button:o.getValue("free_shipping_qualified_show_cart_button",t),show_checkout_button:o.getValue("free_shipping_qualified_show_checkout_button",t)},o.live.on("tab-changed",function(t,e){"foobar_notification-settings_content_free_shipping_qualified-content"===e&&o.showTarget()})},applyChange:function(t){var e,o,i=this,n=i.getValue("free_shipping_qualified_text",t),s=i.getValue("free_shipping_qualified_show_cart_button",t),r=i.getValue("free_shipping_qualified_show_checkout_button",t),a=!1;i.hasChanged("text",n)&&(i.live.setMessageDirect({text:l.Live.freeShippingFormat(n,i.live.bar)},t),a=!0),(i.hasChanged("show_cart_button",s)||i.hasChanged("show_checkout_button",r))&&(e={icon:i.getValue("free_shipping_icon_cart",t),show_icon:i.getValue("free_shipping_qualified_cart_button_show_icon",t),show_button:s,text:i.getValue("free_shipping_qualified_cart_button_text",t),href:i.getValue("free_shipping_qualified_cart_button_url",t),target:i.getValue("free_shipping_qualified_cart_button_target",t),mobile:"yes"===s&&"yes"===r?"fbr-mobile-50":"fbr-mobile-100"},i.live.setButton("fbr-button-cart",e,!1),o={icon:i.getValue("free_shipping_icon_checkout",t),show_icon:i.getValue("free_shipping_qualified_cart_button_show_icon",t),show_button:r,text:i.getValue("free_shipping_qualified_checkout_button_text",t),href:i.getValue("free_shipping_qualified_checkout_button_url",t),target:i.getValue("free_shipping_qualified_checkout_button_target",t),mobile:"yes"===s&&"yes"===r?"fbr-mobile-50":"fbr-mobile-100"},i.live.setButton("fbr-button-checkout",o,"yes"===s),a=!0),i.finalize(a,!1)}}),l.live.register(new l.Live.Content_FreeShipping_QualifiedMessage)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(e){e.Live.Content_SignUp_ErrorMessage=e.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_sign_up_error_field_group-field",null,e.Item.SignUpError)},setup:function(t){var o=this;o.initial={text:o.getValue("sign_up_error_text",t),button_text:o.getValue("sign_up_error_button_text",t),duration:o.getValue("sign_up_error_duration",t)},o.live.on("tab-changed",function(t,e){"foobar_notification-settings_content_sign_up_error-content"===e&&o.showTarget()})},targetItem:function(){var t=this.live.bar.getByType(e.Item.SignUpError);return t instanceof e.Item.SignUpError?(t.opt.timeoutAction="resetTimeout",t):null},applyChange:function(t){var e,o=this,i=o.getValue("sign_up_error_text",t),n=o.getValue("sign_up_error_button_text",t),s=o.getValue("sign_up_error_duration",t),r=!1;o.hasChanged("text",i)&&(o.live.setMessage({text:"sign_up_error_text"},t),r=!0),o.hasChanged("button_text",n)&&(o.live.bar.item.$el.find(".fbr-button:first").text(n),r=!0),o.hasChanged("duration",s)&&(e=parseInt(s),isNaN(e)&&(e=0),e*=1e3,o.live.bar.item.setTimeout(e),r=!0),o.finalize(r,!1)}}),e.live.register(new e.Live.Content_SignUp_ErrorMessage)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_SignUp_Form=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_sign_up_form_field_group-field")},setup:function(t){this.initial={placeholder:this.getValue("sign_up_placeholder",t),button_text:this.getValue("sign_up_button_text",t)}},applyChange:function(t){var e=this,o=e.getValue("sign_up_placeholder",t),i=e.getValue("sign_up_button_text",t),n=!1;e.hasChanged("placeholder",o)&&(e.live.bar.item.$el.find(".fbr-email").attr("placeholder",o),n=!0),e.hasChanged("button_text",i)&&(e.live.bar.item.$el.find(".fbr-submit").text(i),n=!0),e.finalize(n,!1)}}),t.live.register(new t.Live.Content_SignUp_Form)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_SignUp_Link=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_sign_up_link_field_group-field")},setup:function(t){this.initial={text:this.getValue("sign_up_link_text",t),url:this.getValue("sign_up_link_url",t),target:this.getValue("sign_up_link_target",t)}},applyChange:function(t){var e=this,o=e.getValue("sign_up_link_text",t),i=e.getValue("sign_up_link_url",t),n=e.getValue("sign_up_link_target",t),s=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.setMessage({text:"sign_up_text",show_link:"sign_up_show_link",link_text:"sign_up_link_text",link_url:"sign_up_link_url",link_target:"sign_up_link_target"},t),s=!0),e.finalize(s,!1)}}),t.live.register(new t.Live.Content_SignUp_Link)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.Content_SignUp_Message=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_sign_up_message_field_group-field",null,t.Item.SignUp)},setup:function(t){var o=this;o.initial={text:o.getValue("sign_up_text",t),show_link:o.getValue("sign_up_show_link",t)},o.live.on("tab-changed",function(t,e){"foobar_notification-settings_content-sign-up-content"===e&&o.showTarget()})},applyChange:function(t){var e=this,o=e.getValue("sign_up_text",t),i=e.getValue("sign_up_show_link",t),n=!1;(e.hasChanged("text",o)||e.hasChanged("show_link",i))&&(e.live.setMessage({text:"sign_up_text",show_link:"sign_up_show_link",link_text:"sign_up_link_text",link_url:"sign_up_link_url",link_target:"sign_up_link_target"},t),n=!0),e.finalize(n,!1)}}),t.live.register(new t.Live.Content_SignUp_Message)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(e){e.Live.Content_SignUp_SuccessMessage=e.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_sign_up_success_field_group-field",null,e.Item.SignUpSuccess)},setup:function(t){var o=this;o.initial={text:o.getValue("sign_up_success_text",t),duration:o.getValue("sign_up_success_duration",t)},o.live.on("tab-changed",function(t,e){"foobar_notification-settings_content_sign_up_success-content"===e&&o.showTarget()})},targetItem:function(){var t=this.live.bar.getByType(e.Item.SignUpSuccess);return t instanceof e.Item.SignUpSuccess?(t.opt.timeoutAction="resetTimeout",t):null},applyChange:function(t){var e,o=this,i=o.getValue("sign_up_success_text",t),n=o.getValue("sign_up_success_duration",t),s=!1;(o.hasChanged("text",i)||o.hasChanged("duration",n))&&(o.live.setMessage({text:"sign_up_success_text"},t),e=parseInt(n),isNaN(e)&&(e=0),e*=1e3,o.live.bar.item.setTimeout(e),s=!0),o.finalize(s,!1)}}),e.live.register(new e.Live.Content_SignUp_SuccessMessage)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.tweetFormat=function(t){return t.replace(/\B(!?)(@)(\w+)/i,function(t,e,o,i){var n=o+i;return"!"===e?n:'<a href="https://twitter.com/'+i+'" target="_blank" class="fbr-inline-link">'+n+"</a>"})}}(FooBar,(FooBar.utils.is,FooBar.utils.obj)),function(_){_.Live.Content_Tweet_Button=_.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_tweet_button_group-field"),this.positions=["fbr-buttons-left","fbr-buttons-right"]},setup:function(t){var e=this;e.initial={text:e.getValue("tweet_button_text",t),icon:e.getValue("tweet_button_icon",t),colors:e.getValue("tweet_button_color",t),target:e.getValue("tweet_button_target",t),position:e.getValue("tweet_button_position",t)}},applyChange:function(t){var e,o,i,n=this,s=n.getValue("tweet_button_text",t),r=n.getValue("tweet_button_icon",t),a=n.getValue("tweet_button_color",t),l=n.getValue("tweet_button_target",t),u=n.getValue("tweet_button_position",t),c=!1;(n.hasChanged("text",s)||n.hasChanged("icon",r)||n.hasChanged("colors",a)||n.hasChanged("target",l))&&(o=(e=n.live.bar).item.$el.find(".fbr-button:first").toggleClass("fbr-no-icon","no"===r).toggleClass("fbr-twitter-colors","yes"===a).attr({href:"#foobar_placehholder",target:l}).text(s),"yes"===r&&(i=_.icons.get("twitter",e.opt.svg,[e.item.cls.buttonIcon]),o.prepend(i)),c=!0),n.hasChanged("position",u)&&(n.live.setItemClass(u,n.positions),c=!0),n.finalize(c,!1)}}),_.live.register(new _.Live.Content_Tweet_Button)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(r){r.Live.Content_Tweet_Link=r.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_tweet_link_group-field")},setup:function(t){this.initial={text:this.getValue("tweet_link_text",t),url:this.getValue("tweet_link_url",t),target:this.getValue("tweet_link_target",t)}},applyChange:function(t){var e=this,o=e.getValue("tweet_link_text",t),i=e.getValue("tweet_link_url",t),n=e.getValue("tweet_link_target",t),s=!1;(e.hasChanged("text",o)||e.hasChanged("url",i)||e.hasChanged("target",n))&&(e.live.setMessageDirect({text:r.Live.tweetFormat(e.getValue("tweet_text",t)),show_link:e.getValue("tweet_show_link",t),link_text:o,link_url:i,link_target:n},t),s=!0),e.finalize(s,!1)}}),r.live.register(new r.Live.Content_Tweet_Link)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(a){a.Live.Content_Tweet_Message=a.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_tweet_group-field")},setup:function(t){var e=this;e.initial={text:e.getValue("tweet_text",t),drop_cap:e.getValue("tweet_drop_cap",t),side_border:e.getValue("tweet_side_border",t),show_link:e.getValue("tweet_show_link",t)}},applyChange:function(t){var e=this,o=e.getValue("tweet_text",t),i=e.getValue("tweet_drop_cap",t),n=e.getValue("tweet_side_border",t),s=e.getValue("tweet_show_link",t),r=!1;(e.hasChanged("text",o)||e.hasChanged("show_link",s))&&(e.live.setMessageDirect({text:a.Live.tweetFormat(o),show_link:s,link_text:e.live.getValue("tweet_link_text",t),link_url:e.live.getValue("tweet_link_url",t),link_target:e.live.getValue("tweet_link_target",t)},t),r=!0),e.hasChanged("drop_cap",i)&&(e.live.setItemClass("yes"===i?"fbr-drop-cap":"","fbr-drop-cap"),r=!0),e.hasChanged("side_border",n)&&(e.live.setItemClass("yes"===n?"fbr-side-border":"","fbr-side-border"),r=!0),e.finalize(r,!1)}}),a.live.register(new a.Live.Content_Tweet_Message)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(o,t){t.Live.General_Layout=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_layout_group-field"),this.layouts=["fbr-layout-inline","fbr-layout-top-inline","fbr-layout-top","fbr-layout-bottom","fbr-layout-left","fbr-layout-left-top","fbr-layout-left-center","fbr-layout-left-bottom","fbr-layout-right","fbr-layout-right-top","fbr-layout-right-center","fbr-layout-right-bottom"]},setup:function(t){var e=this;e.$inlineMetabox=o("#foobar_notification-inline_preview"),e.$inlineContainer=o(".foobar_metabox_inline_preview_container"),e.$inlineContainer.find(".foobar_metabox_inline_preview_content").hide(),e.$body=o("body"),e.initial={layout:e.getLayout(t),layout_push:e.getValue("layout_push",t),open:e.getValue("open",t)}},applyChange:function(t){var e,o,i=this,n=i.getLayout(t),s=i.getValue("layout_push",t),r=i.getValue("open",t),a=!1,l=!1;i.hasChanged("layout",n)&&(i.live.setClass(n,i.layouts),a=!0,"fbr-layout-inline"===n?(i.$inlineContainer.append(i.live.bar.$el),i.$inlineMetabox.show()):(i.$body.append(i.live.bar.$el),i.$inlineMetabox.hide())),i.hasChanged("layout_push",s)&&(i.live.setOption("push","yes"===s),a=!0),i.hasChanged("open",r)&&(e={},"open"===r&&(o=i.getValue("transition",t),e.name=""!==o?"transition":"immediate"),i.live.setOption("open",e),l=!0),i.finalize(a,l)},getLayout:function(t){var e=this.getValue("layout",t),o=this.getValue("layout_left",t),i=this.getValue("layout_right",t);return null!==o?o:null!==i?i:e}}),t.live.register(new t.Live.General_Layout)}(FooBar.$,FooBar,(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t){t.Live.General_ToggleButton=t.Live.Field.extend({construct:function(){this._super("foobar_notification-settings_toggle_group-field"),this.toggles=["fbr-toggle-default","fbr-toggle-circle","fbr-toggle-overlap","fbr-toggle-none"],this.toggle_positions=["fbr-toggle-left","fbr-toggle-right"]},setup:function(t){this.initial={toggle:this.getValue("toggle",t),toggle_position:this.getValue("toggle_position",t)}},applyChange:function(t){var e=this,o=e.getValue("toggle",t),i=e.getValue("toggle_position",t),n=!1;e.hasChanged("toggle",o)&&(e.live.setClass(o,e.toggles),n=!0),e.hasChanged("toggle_position",i)&&(e.live.setClass(i,e.toggle_positions),n=!0),e.finalize(n,!1)}}),t.live.register(new t.Live.General_ToggleButton)}((FooBar.$,FooBar),(FooBar.utils,FooBar.utils.is,FooBar.utils.obj,FooBar.utils.str)),function(t,e){var o=!1;function i(){o||e.live.init(),o=!0}var n=!1,s=!1;e.on("ready",function(){(n=!0)===s&&i()}),t.on("ready",function(){(s=!0)===n&&i()})}(FooFields,FooBar);