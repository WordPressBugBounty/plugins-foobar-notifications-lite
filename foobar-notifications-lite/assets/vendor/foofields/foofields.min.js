"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,r){var e={version:300};if("wpColorPickerAlpha"in window&&"version"in window.wpColorPickerAlpha){var t=parseInt(window.wpColorPickerAlpha.version,10);if(!isNaN(t)&&e.version<=t)return}if(!Color.fn.hasOwnProperty("to_s")){Color.fn.to_s=function(e){return"hex"===(e=e||"rgb")&&this._alpha<1&&(e="rgb"),this.toCSS(e).replace(/\s+/g,"")},window.wpColorPickerAlpha=e;var l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==";a.widget("a8c.iris",a.a8c.iris,{alphaOptions:{alphaEnabled:!1,alphaCustomWidth:91,alphaReset:!1,isDeprecated:!1},_getCurrentColor:function(e){e===r&&(e=this._color);var t=e.toString();if(this.alphaOptions.alphaEnabled){var n="hex";return t&&t.match(/^(rgb|hsl)/)&&(n=e.substring(0,3)),e.to_s(n)}return t},_addInputListeners:function(i){var o=this,e=function(e){var t=i.val(),n=new Color(t);if(t=t.replace(/^(#|(rgb|hsl)a?)/,""),i.removeClass("iris-error"),n.error)""!==t&&i.addClass("iris-error");else if(n.toString()!==o._color.toString()||n._alpha!==o.color._alpha){if("keyup"===e.type&&t.match(/^[0-9a-fA-F]{3}$/))return;o._setOption("color",o._getCurrentColor(n))}};i.on("change",e).on("keyup",o._debounce(e,100)),o.options.hide&&i.one("focus",function(){o.show()})},_dimensions:function(e){if(this._super(e),this.alphaOptions.alphaEnabled){var t,n,i,o,s,r=this,l=r.options,a=r.controls.square,c=r.picker.find(".iris-strip");for(t=Math.round(r.picker.outerWidth(!0)-(l.border?22:0)),n=Math.round(a.outerWidth()),i=Math.round((t-n)/2),o=Math.round(i/2),s=Math.round(n+2*i+2*o);t<s;)i=Math.round(i-2.5),o=Math.round(o-1),s=Math.round(n+2*i+2*o);a.css("margin","0"),c.width(i).css("margin-left",o+"px")}},_change:function(){var t=this,e=t.active;if(t._super(),t.alphaOptions.alphaEnabled){var n=t.controls,i=parseInt(100*t._color._alpha),o=t._color.toRgb(),s=["rgb("+o.r+","+o.g+","+o.b+") 0%","rgba("+o.r+","+o.g+","+o.b+", 0) 100%"];t.options.color=t._getCurrentColor(),n.stripAlpha.css({background:"linear-gradient(to bottom, "+s.join(", ")+"), url("+l+")"}),e&&n.stripAlphaSlider.slider("value",i),t._color.error||t.element.removeClass("iris-error").val(t._getCurrentColor()),t.picker.find(".iris-palette-container").off(".palette").on("click.palette",".iris-palette",function(){var e=a(this).data("color");t.alphaOptions.alphaReset&&(t._color._alpha=1,e=t._getCurrentColor()),t._setOption("color",e)})}},_paintDimension:function(e,t){var n=this,i=!1;n.alphaOptions.alphaEnabled&&"strip"===t&&(i=n._color,n._color=new Color(i.toString()).setHSpace(n.options.mode),n.hue=n._color.h()),n._super(e,t),i&&(n._color=i)},_setOption:function(e,t){var n=this,i=n.element;if("alphaOptions"===e){if("object"===_typeof(t)&&(n.alphaOptions=a.extend({},n.alphaOptions,t)),!n.alphaOptions.alphaEnabled)return;n.alphaOptions.alphaCustomWidth&&i.width(parseInt(i.width()+n.alphaOptions.alphaCustomWidth,10));var o=n.controls.strip.clone(!1,!1),s=o.find(".iris-slider-offset"),r={stripAlpha:o,stripAlphaSlider:s};o.addClass("iris-strip-alpha"),s.addClass("iris-slider-offset-alpha"),o.appendTo(n.picker.find(".iris-picker-inner")),n.controls=a.extend(!0,n.controls,r),n.controls.stripAlphaSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*n._color._alpha),slide:function(e,t){n.active="strip",n._color._alpha=parseFloat(t.value/100),n._change.apply(n,arguments)}}),n._dimensions(!0),n._setOption("color",n._getCurrentColor())}else if(n.alphaOptions.alphaEnabled&&"color"===e){t=""+t;var l=new Color(t).setHSpace(n.options.mode);l.error||(n._color=l,n.options.color=n._getCurrentColor(),n.active="external",n._change())}else n._super(e,t)},color:function(e){return!0===e?this._color.clone():e===r?this._getCurrentColor():void this.option("color",e)}}),a.widget("wp.wpColorPicker",a.wp.wpColorPicker,{_create:function(){this._alphaOptions={alphaEnabled:!1,alphaCustomWidth:91,alphaReset:!1,isDeprecated:!1},this._super()},_addListeners:function(){var i=this,o=i.element;if("alphaEnabled"in i.options&&i.options.alphaEnabled)if(i.options.alphaEnabled&&o.is("input")&&"full"===i.options.type){var s={alphaEnabled:!0,isDeprecated:i.toggler.is("a")};a.each(i._alphaOptions,function(e,t){if("alphaEnabled"===e||"isDeprecated"===e)return!0;var n=e in i.options?i.options[e]:r;switch(e){case"alphaCustomWidth":n=(n=n===r?t:n)?parseInt(n,10):0,n=isNaN(n)?t:n;break;default:n=n===r?t:!!n}s[e]=n}),i._alphaOptions=a.extend(i._alphaOptions,s),i.toggler.css({"background-image":"url("+l+")"}),i._alphaOptions.isDeprecated?i.toggler.html('<span class="color-alpha" />'):i.toggler.css({position:"relative"}).append('<span class="color-alpha" />'),i.colorAlpha=i.toggler.find("span.color-alpha"),i.colorAlpha.css({"background-color":o.val()}),o.iris({alphaOptions:i._alphaOptions,change:function(e,t){i._alphaOptions.isDeprecated&&i.toggler.css({"background-image":"url("+l+")"});var n=o.iris("instance").color();i.colorAlpha.css({"background-color":n}),"function"==typeof i.options.change&&i.options.change.call(this,e,t,n)}}),i.wrap.on("click.wpcolorpicker",function(e){e.stopPropagation()}),i.toggler.on("click.wpcolorpicker",function(){i.toggler.hasClass("wp-picker-open")?i.close():i.open()}),o.on("change",function(e){var t=a(this).val();(o.hasClass("iris-error")||""===t||t.match(/^(#|(rgb|hsl)a?)$/))&&(i._alphaOptions.isDeprecated&&i.toggler.removeAttr("style"),i.colorAlpha.css("background-color",""),"function"==typeof i.options.clear&&i.options.clear.call(this,e))}),i.button.on("click",function(e){a(this).hasClass("wp-picker-clear")?(i._alphaOptions.isDeprecated&&i.toggler.removeAttr("style"),i.colorAlpha.css("background-color",""),o.val(""),"function"==typeof i.options.clear&&i.options.clear.call(this,e),o.trigger("change")):a(this).hasClass("wp-picker-default")&&o.val(i.options.defaultColor).change()})}else i._super();else i._super()},color:function(e){if(e===r)return this._alphaOptions.alphaEnabled?this.element.iris("instance").color():this.element.iris("option","color");this.element.iris("option","color",e)}})}}(jQuery),function(e,t){t.config={opt:{smallScreen:960,smallField:320,on:{},fields:{}},cls:{small:"foofields-small",hoverable:"foofields-hoverable",active:"foofields-active",first:"foofields-first",last:"foofields-last",hidden:"foofields-hidden",selected:"foofields-selected",loading:"foofields-loading",container:{el:"foofields-container",content:{el:"foofields-content",field:"foofields-field"},tabs:{el:"foofields-tabs",exists:"foofields-has-tabs",tab:{el:"foofields-tab",link:"foofields-tab-link",icon:"foofields-tab-icon",text:"foofields-tab-text",menu:{el:"foofields-tab-menu",exists:"foofields-has-menu",visible:"foofields-show-menu",empty:"foofields-empty-menu",showing:"foofields-menu-showing",header:"foofields-tab-menu-header",item:{el:"foofields-tab-menu-item",link:"foofields-tab-menu-link",text:"foofields-tab-menu-text"}}}}},fields:{}},i18n:{fields:{}}},t.$=e}(jQuery,window.FooFields=window.FooFields||{}),function(e){e?function(){try{return!!window.FooFields.utils}catch(e){return!1}}()||(window.FooFields.utils={$:e,version:"0.2.2"}):console.warn("jQuery must be included in the page prior to the FooFields.utils library.")}(jQuery),function(t,n){"0.2.2"===n.version&&(n.is={},n.is.array=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.is.boolean=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},n.is.element=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:!!e&&"object"===_typeof(e)&&1===e.nodeType&&"string"==typeof e.nodeName},n.is.empty=function(e){if(n.is.undef(e)||null===e)return!0;if(n.is.number(e)&&0===e)return!0;if(n.is.boolean(e)&&!1===e)return!0;if(n.is.string(e)&&0===e.length)return!0;if(n.is.array(e)&&0===e.length)return!0;if(n.is.jq(e)&&0===e.length)return!0;if(n.is.hash(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1},n.is.error=function(e){return"[object Error]"===Object.prototype.toString.call(e)},n.is.fn=function(e){return e===window.alert||"[object Function]"===Object.prototype.toString.call(e)},n.is.hash=function(e){return n.is.object(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval},n.is.jq=function(e){return!n.is.undef(t)&&e instanceof t},n.is.number=function(e){return"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)},n.is.object=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!n.is.undef(e)&&null!==e},n.is.promise=function(e){return n.is.object(e)&&n.is.fn(e.then)&&n.is.fn(e.promise)},n.is.size=function(e){return!!(n.is.string(e)&&!n.is.empty(e)||n.is.number(e))&&/^(auto|none|(?:[\d.]*)+?(?:%|px|mm|q|cm|in|pt|pc|em|ex|ch|rem|vh|vw|vmin|vmax)?)$/.test(e)},n.is.string=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.is.undef=function(e){return void 0===e})}(FooFields.utils.$,FooFields.utils),function(f,d,h){if("0.2.2"===d.version){d.fn={};var l=Function.prototype.toString;d.fn.CONTAINS_SUPER=/xyz/.test(l.call(function(){xyz}))?/\b_super\b/:/.*/,d.fn.addOrOverride=function(e,t,n){if(h.object(e)&&h.string(t)&&!h.empty(t)&&h.fn(n)){var i,o,s=e[t],r=h.fn(s)&&d.fn.CONTAINS_SUPER.test(l.call(n));e[t]=r?(i=s,o=n,function(){var e=this._super;this._super=i;var t=o.apply(this,arguments);return this._super=e,t}):n}},d.fn.apply=function(e,t){function n(){return e.apply(this,t)}return t=h.array(t)?t:[],n.prototype=e.prototype,new n},d.fn.arg2arr=function(e){return Array.prototype.slice.call(e)},d.fn.debounce=function(n,i){var o;return function(){var e=this,t=d.fn.arg2arr(arguments);clearTimeout(o),o=setTimeout(function(){n.apply(e,t)},i)}},d.fn.throttle=function(n,i){var o,s;return function(){var e=this,t=d.fn.arg2arr(arguments);o?(clearTimeout(s),s=setTimeout(function(){Date.now()-o>=i&&(n.apply(e,t),o=Date.now())},i-(Date.now()-o))):(n.apply(e,t),o=Date.now())}},d.fn.check=function(t,e,n,i){function o(e){return function(){return e.apply(t,arguments)}}return n=h.fn(n)?n:f.noop,t=h.object(t)?t:window,e=h.string(e)?d.fn.fetch(e,i):e,h.fn(e)?o(e):o(n)},d.fn.fetch=function(e,n){return!h.string(e)||h.empty(e)?null:(n=h.object(n)?n:window,f.each(e.split("."),function(e,t){if(!n[t])return!1;n=n[t]}),h.fn(n)?n:null)},d.fn.enqueue=function(e,n,t,i){var o=d.fn.arg2arr(arguments),s=f.Deferred(),r=f.Deferred(),l=r.promise(),a=[],c=[],u=!0;return e=o.shift(),n=o.shift(),f.each(e,function(e,t){h.fn(t[n])&&(l=l.then(function(){if(!u){var e=d.fn.arg2arr(arguments);a.push(e)}return u=!1,function(e,t){try{return c.push(e),t.apply(e,o)}catch(e){return s.reject(e,c),s}}(t,t[n])}))}),l.then(function(){if(!u){var e=d.fn.arg2arr(arguments);a.push(e)}u=!1,s.resolve(a)}),l.fail(function(){var e=d.fn.arg2arr(arguments);e.push(c),s.reject.apply(s,e)}),r.resolve(),s.promise()},d.fn.when=function(e){if(!h.array(e)||h.empty(e))return f.when();var t=f.Deferred(),n=[],i=e.length;function o(){--i||t.resolve(n)}for(var s=0;s<e.length;s++)h.promise(e[s])?e[s].then(function(e){n.push(e)}).always(o):o();return t.promise()},d.fn.rejectWith=function(e,t){var n=f.Deferred(),i=d.fn.arg2arr(arguments);return n.reject.apply(n,i).promise()},d.fn.resolveWith=function(e,t){var n=f.Deferred(),i=d.fn.arg2arr(arguments);return n.resolve.apply(n,i).promise()},d.fn.resolved=f.Deferred().resolve().promise(),d.fn.rejected=f.Deferred().reject().promise()}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(e,r){if("0.2.2"===e.version){e.url={};var s=document.createElement("a");e.url.parts=function(e){s.href=e;var t=s.port?s.port:-1!==["http:","https:"].indexOf(s.protocol)?"https:"===s.protocol?"443":"80":"",n=s.hostname+(t?":"+t:""),i=s.origin?s.origin:s.protocol+"//"+n,o="/"===s.pathname.slice(0,1)?s.pathname:"/"+s.pathname;return{hash:s.hash,host:n,hostname:s.hostname,href:s.href,origin:i,pathname:o,port:t,protocol:s.protocol,search:s.search}},e.url.full=function(e){return!r.string(e)||r.empty(e)?null:(s.href=e,s.href)},e.url.param=function(e,t,n){return r.string(e)&&r.string(t)&&!r.empty(t)?r.undef(n)?(o=((i=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)")).exec(e)||["",""])[1].replace(/\+/g,"%20"),r.string(o)&&!r.empty(o)?decodeURIComponent(o):null):(r.empty(n)?(i=new RegExp("^([^#]*?)(([^#]*)&)?"+t+"(=[^&#]*)?(&|#|$)"),o=e.replace(i,"$1$3$5").replace(/^([^#]*)((\?)&|\?(#|$))/,"$1$3$4")):(i=new RegExp("([?&])"+t+"[^&]*"),s=t+"="+encodeURIComponent(n),(o=e.replace(i,"$1"+s))!==e||i.test(o)||(o+=(-1!==o.indexOf("?")?"&":"?")+s)),o):e;var i,o,s}}}(FooFields.utils,FooFields.utils.is),function(l,a,c){"0.2.2"===l.version&&(l.str={},l.str.camel=function(e){return a.empty(e)?e:e.toUpperCase()===e?e.toLowerCase():e.replace(/^([A-Z])|[-\s_]+(\w)/g,function(e,t,n){return a.string(n)?n.toUpperCase():t.toLowerCase()})},l.str.kebab=function(e){return a.empty(e)?e:e.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g).filter(Boolean).map(function(e){return e.toLowerCase()}).join("-")},l.str.contains=function(e,t,n){return!(!a.string(e)||a.empty(e)||!a.string(t)||a.empty(t))&&(t.length<=e.length&&-1!==(n?e.toUpperCase().indexOf(t.toUpperCase()):e.indexOf(t)))},l.str.containsWord=function(e,t,n){if(!a.string(e)||a.empty(e)||!a.string(t)||a.empty(t)||e.length<t.length)return!1;for(var i=e.split(/\W/),o=0,s=i.length;o<s;o++)if(n?i[o].toUpperCase()===t.toUpperCase():i[o]===t)return!0;return!1},l.str.endsWith=function(e,t){return!a.string(e)||a.empty(e)||!a.string(t)||a.empty(t)?e===t:e.slice(e.length-t.length)===t},l.str.escapeRegExp=function(e){return a.empty(e)?e:e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},l.str.fnv1a=function(e){if(!a.string(e)||a.empty(e))return null;var t,n,i=2166136261;for(t=0,n=e.length;t<n;t++)i^=e.charCodeAt(t),i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24);return i>>>0},l.str.from=function(e,t){return l.str.contains(e,t)?e.substring(e.indexOf(t)+t.length):null},l.str.join=function(e,t,n){if(!a.string(e)||!a.string(t))return null;var i=c.arg2arr(arguments);e=i.shift();var o,s,r=i.shift();for(o=0,s=i.length;o<s;o++)t=i[o],a.empty(t)||(l.str.endsWith(r,e)&&(r=r.slice(0,r.length-e.length)),l.str.startsWith(t,e)&&(t=t.slice(e.length)),r+=e+t);return r},l.str.startsWith=function(e,t){return!a.empty(e)&&!a.empty(t)&&e.slice(0,t.length)===t},l.str.until=function(e,t){return l.str.contains(e,t)?e.substring(0,e.indexOf(t)):e},l.str.format=function(n,e,t){var i=c.arg2arr(arguments);return n=i.shift(),a.string(n)&&0<i.length&&(1===i.length&&(a.array(i[0])||a.object(i[0]))&&(i=i[0]),l.each(i,function(e,t){n=n.replace(new RegExp("\\{"+t+"\\}","gi"),e+"")})),n})}(FooFields.utils,FooFields.utils.is,FooFields.utils.fn),function(l,a,c,o,s){if("0.2.2"===a.version){a.obj={};var n=function(){};a.obj.create=function(e){if(!c.object(e))throw TypeError("Argument must be an object");n.prototype=e;var t=new n;return n.prototype=null,t},a.obj.extend=function(n,e,t){n=c.object(n)?n:{};var i=o.arg2arr(arguments);return i.shift(),l.each(i,function(e,t){a.obj.merge(n,t)}),n},a.obj.merge=function(e,t){for(var n in e=c.hash(e)?e:{},t=c.hash(t)?t:{})t.hasOwnProperty(n)&&(c.hash(t[n])?(e[n]=c.hash(e[n])?e[n]:{},a.obj.merge(e[n],t[n])):c.array(t[n])?e[n]=t[n].slice():e[n]=t[n]);return e},a.obj.mergeValid=function(n,i,o,e){if(!c.hash(o)||!c.hash(i))return n;var s,t,r;for(s in i=c.hash(i)?i:{},e=c.hash(e)?e:{},i)i.hasOwnProperty(s)&&c.fn(i[s])&&(t=c.array(e[s])?e[s]:c.string(e[s])?[e[s]]:[s],l.each(t,function(e,t){if(r=a.obj.prop(o,t),!c.undef(r))return i[s](r)?(a.obj.prop(n,s,r),!1):void 0}));return n},a.obj.prop=function(n,e,i){var t,o;if(c.object(n)&&!c.empty(e))return c.undef(i)?(s.contains(e,".")?(t=e.split("."),o=t.length-1,l.each(t,function(e,t){if(e===o)i=n[t];else{if(!c.hash(n[t]))return!1;n=n[t]}})):c.undef(n[e])||(i=n[e]),i):void(s.contains(e,".")?(t=e.split("."),o=t.length-1,l.each(t,function(e,t){e===o?n[t]=i:n=c.hash(n[t])?n[t]:n[t]={}})):c.undef(n[e])||(n[e]=i))}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.str),function(u,o,f){if("0.2.2"===o.version){o.ready=function(e){function t(){try{e.call(window,o.$)}catch(e){console.error(e)}}(Function("/*@cc_on return true@*/")()?"complete"===document.readyState:"loading"!==document.readyState)?t():document.addEventListener("DOMContentLoaded",t,!1)},o.find=function(e,t,n){var i,o;if(f.fn(t))if(n=f.undef(n)?t:n,f.array(e)){for(i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e))return e[i]}else if(f.object(e)){var s=Object.keys(e);for(i=0,o=s.length;i<o;i++)if(t.call(n,e[s[i]],s[i],e))return e[s[i]]}},o.each=function(e,t,n){var i,o;if(f.fn(t))if(n=f.undef(n)?t:n,f.array(e))for(i=0,o=e.length;i<o&&!1!==t.call(n,e[i],i,e);i++);else if(f.object(e)){var s=Object.keys(e);for(i=0,o=s.length;i<o&&!1!==t.call(n,e[s[i]],s[i],e);i++);}},o.inArray=function(e,t){return f.array(t)?t.indexOf(e):-1},o.versionCompare=function(e,t){if(!/[\d.]/.test(e)||!/[\d.]/.test(t))return NaN;function n(e){for(var t=e.split("."),n=[],i=0,o=t.length;i<o;i++)n[i]=parseInt(t[i]),isNaN(n[i])&&(n[i]=0);return n}for(var i=n(e),o=n(t);i.length<o.length;)i.push(0);for(;o.length<i.length;)o.push(0);for(var s=0;s<i.length;++s){if(o.length===s)return 1;if(i[s]!==o[s])return i[s]>o[s]?1:-1}return i.length!==o.length?-1:0};var i=0;o.uniqueId=function(e,t){var n=e.attr("id");return f.empty(n)&&(n=(t=f.string(t)&&!f.empty(t)?t:"uid-")+ ++i,e.attr("id",n).data("__uniqueId__",!0)),n},o.removeUniqueId=function(e){e.data("__uniqueId__")&&e.removeAttr("id").removeData("__uniqueId__")},o.selectify=function(e){if(f.empty(e))return null;if(f.hash(e)){var t,n={};for(var i in e)e.hasOwnProperty(i)&&(t=o.selectify(e[i]))&&(n[i]=t);return n}return f.string(e)||f.array(e)?(f.string(e)&&(e=[e]),e.map(function(e){return f.string(e)?"."+e.split(/\s/g).join("."):null}).join(",")):null},o.src=function(e,t,n,i,o,s,r){if(!f.string(e))return null;if(!f.string(t))return e;var l=t.replace(/(\s[\d.]+[whx]),/g,"$1 @,@ ").split(" @,@ ").map(function(e){return{url:/^\s*(\S*)/.exec(e)[1],w:parseFloat((/\S\s+(\d+)w/.exec(e)||[0,1/0])[1]),h:parseFloat((/\S\s+(\d+)h/.exec(e)||[0,1/0])[1]),x:parseFloat((/\S\s+([\d.]+)x/.exec(e)||[0,1])[1])}});if(!l.length)return e;l.unshift({url:e,w:l[0].w!==1/0&&l[0].h===1/0?n:1/0,h:l[0].h!==1/0&&l[0].w===1/0?i:1/0,x:1});var a=f.number(r)?r:window.devicePixelRatio||1,c={w:o*a,h:s*a,x:a},u=["w","h","x"];return u.forEach(function(t){var n=Math.max.apply(null,l.map(function(e){return e[t]}));l=l.filter(function(e){return e[t]>=c[t]||e[t]===n})}),u.forEach(function(t){var n=Math.min.apply(null,l.map(function(e){return e[t]}));l=l.filter(function(e){return e[t]===n})}),l[0].url},o.scrollParent=function(e,s,t){e=f.jq(e)?e:u(e),s=f.string(s)&&/^(x|y|xy|yx)$/i.test(s)?s:"xy";var n=u(!!e.length&&e[0].ownerDocument||document);if(t=f.jq(t)?t:n,!e.length)return t;var i=e.css("position"),r="absolute"===i,l=/(auto|scroll)/i,a=/x/i,c=/y/i,o=e.parentsUntil(t).filter(function(e,t){var n=u(this);if(r&&"static"===n.css("position"))return!1;var i=c.test(s)&&t.scrollHeight>t.clientHeight&&l.test(n.css("overflow-y")),o=a.test(s)&&t.scrollWidth>t.clientWidth&&l.test(n.css("overflow-x"));return i||o}).eq(0);return o.is("html")&&(o=n),"fixed"!==i&&o.length?o:t}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(a,c,u){if("0.2.2"===c.version){c.animation={},c.animation.requestFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}).bind(window),c.animation.cancelFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window);var e,t,n=document.createElement("div");c.animation.supported=(e=n.style,u.string(e.animation)||u.string(e.WebkitAnimation)||u.string(e.MozAnimation)||u.string(e.msAnimation)||u.string(e.OAnimation)),c.animation.end=(t=n.style,u.string(t.animation)?"animationend":u.string(t.WebkitAnimation)?"webkitAnimationEnd":u.string(t.MozAnimation)?"animationend":u.string(t.msAnimation)?"msAnimationEnd":u.string(t.OAnimation)?"oAnimationEnd":null),c.animation.duration=function(e,t){if(t=u.number(t)?t:0,!u.jq(e))return t;var n=e.css("animation-duration");if(/^([\d.]*)+?(ms|s)/i.test(n)){var i=n.split(","),o=0;return i.forEach(function(e){var t=e.match(/^\s*?([\d.]*)+?(ms|s)\s*?$/i),n=parseFloat(t[1]);"s"===t[2].toLowerCase()&&(n*=1e3),o<n&&(o=n)}),o}return t},c.animation.iterations=function(e,t){if(t=u.number(t)?t:1,!u.jq(e))return t;var n=e.css("animation-iteration-count");if(/^(([\d.]+)|infinite)/i.test(n)){var i=n.split(","),o=0;return i.forEach(function(e){var t=parseFloat(e);isNaN(t)&&(t=1/0),o<t&&(o=t)}),o}return t},c.animation.start=function(t,e,n,i){var o=a.Deferred(),s=o.promise();if(t=t.first(),c.animation.supported){t.prop("offsetTop");var r=t.data("animation_safety");if(u.hash(r)&&u.number(r.timer)&&(clearTimeout(r.timer),t.removeData("animation_safety").off(c.animation.end+".utils"),r.deferred.reject()),!u.number(i)){var l=c.animation.iterations(t);if(l===1/0)return o.reject("No timeout supplied with an infinite animation."),s;i=c.animation.duration(t)*l+50}r={deferred:o,timer:setTimeout(function(){t.removeData("animation_safety").off(c.animation.end+".utils"),o.resolve()},i)},t.data("animation_safety",r),t.on(c.animation.end+".utils",function(e){t.is(e.target)&&(clearTimeout(r.timer),t.removeData("animation_safety").off(c.animation.end+".utils"),o.resolve())})}return c.animation.requestFrame(function(){u.fn(e)?e.apply(t.get(0),[t]):t.toggleClass(e,n),c.animation.supported||o.resolve()}),s}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(l,a,c,u){if("0.2.2"===a.version){a.transition={};var e,t,n=document.createElement("div");a.transition.supported=(e=n.style,c.string(e.transition)||c.string(e.WebkitTransition)||c.string(e.MozTransition)||c.string(e.msTransition)||c.string(e.OTransition)),a.transition.end=(t=n.style,c.string(t.transition)?"transitionend":c.string(t.WebkitTransition)?"webkitTransitionEnd":c.string(t.MozTransition)?"transitionend":c.string(t.msTransition)?"msTransitionEnd":c.string(t.OTransition)?"oTransitionEnd":null),a.transition.duration=function(e,t){if(t=c.number(t)?t:0,!c.jq(e))return t;var n=e.css("transition-duration");if(/^([\d.]*)+?(ms|s)/i.test(n)){var i=n.split(","),o=0;return i.forEach(function(e){var t=e.match(/^\s*?([\d.]*)+?(ms|s)\s*?$/i),n=parseFloat(t[1]);"s"===t[2].toLowerCase()&&(n*=1e3),o<n&&(o=n)}),o}return t},a.transition.start=function(t,e,n,i){var o=l.Deferred(),s=o.promise();if(t=t.first(),a.transition.supported){t.prop("offsetTop");var r=t.data("transition_safety");c.hash(r)&&c.number(r.timer)&&(clearTimeout(r.timer),t.removeData("transition_safety").off(a.transition.end+".utils"),r.deferred.reject()),i=c.number(i)?i:a.transition.duration(t)+50,r={deferred:o,timer:setTimeout(function(){t.removeData("transition_safety").off(a.transition.end+".utils"),o.resolve()},i)},t.data("transition_safety",r),t.on(a.transition.end+".utils",function(e){t.is(e.target)&&(clearTimeout(r.timer),t.removeData("transition_safety").off(a.transition.end+".utils"),o.resolve())})}return u.requestFrame(function(){c.fn(e)?e.apply(t.get(0),[t]):t.toggleClass(e,n),a.transition.supported||o.resolve()}),s}}}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.animation),function(e,o,s,r,l){"0.2.2"===o.version&&(o.Class=function(){},o.Class.extend=function(e){e=s.hash(e)?e:{};var t=r.create(this.prototype);for(var n in e)e.hasOwnProperty(n)&&l.addOrOverride(t,n,e[n]);function i(){if(!s.fn(this.construct))throw new SyntaxError('FooFields.utils.Class objects must be constructed with the "new" keyword.');this.construct.apply(this,arguments)}return t.construct=s.fn(t.construct)?t.construct:function(){},(i.prototype=t).constructor=s.fn(t.__ctor__)?t.__ctor__:i,i.extend=o.Class.extend,i.override=o.Class.override,i.bases=o.Class.bases,i.__base__=this,i},o.Class.override=function(e,t){l.addOrOverride(this.prototype,e,t)},o.Class.__base__=null,o.Class.bases=function(){return function e(t,n){return s.array(n)||(n=[]),s.fn(t)&&null!==t.__base__?(n.unshift(t.__base__),e(t.__base__,n)):n}(this,[])})}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.obj,FooFields.utils.fn),function(r,l,n){"0.2.2"===r.version&&(r.Event=r.Class.extend({construct:function(e){if(l.empty(e))throw new SyntaxError("FooFields.utils.Event objects must be supplied a `type`.");var t=r.Event.parse(e);this.type=t.type,this.namespace=t.namespace,this.defaultPrevented=!1,this.target=null},preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented}}),r.Event.parse=function(e){e=l.string(e)&&!l.empty(e)?e:null;var t=n.contains(e,".");return{namespaced:t,type:t?n.startsWith(e,".")?null:n.until(e,"."):e,namespace:t?n.from(e,"."):null}},r.EventClass=r.Class.extend({construct:function(){this.events={}},destroy:function(){this.events={}},on:function(n,t,i){var o=this;return l.object(n)?(i=t,Object.keys(n).forEach(function(t){l.fn(n[t])&&t.split(" ").forEach(function(e){o.addListener(e,n[t],i)})})):l.string(n)&&l.fn(t)&&n.split(" ").forEach(function(e){o.addListener(e,t,i)}),o},addListener:function(e,t,n){if(!l.string(e)||/\s/.test(e)||!l.fn(t))return!1;var i=this,o=r.Event.parse(e);return n=l.undef(n)?i:n,l.array(i.events[o.type])||(i.events[o.type]=[]),!i.events[o.type].some(function(e){return e.namespace===o.namespace&&e.fn===t&&e.thisArg===n})&&(i.events[o.type].push({namespace:o.namespace,fn:t,thisArg:n}),!0)},off:function(n,t,i){var o=this;return l.object(n)?(i=t,Object.keys(n).forEach(function(t){t.split(" ").forEach(function(e){o.removeListener(e,n[t],i)})})):l.string(n)&&n.split(" ").forEach(function(e){o.removeListener(e,t,i)}),o},removeListener:function(e,t,n){if(!l.string(e)||/\s/.test(e))return!1;var i=this,o=r.Event.parse(e),s=[];return n=l.undef(n)?i:n,l.empty(o.type)?l.empty(o.namespace)||s.push.apply(s,Object.keys(i.events)):s.push(o.type),s.forEach(function(e){l.array(i.events[e])&&(i.events[e]=i.events[e].filter(function(e){return null!=t?!(e.namespace===o.namespace&&e.fn===t&&e.thisArg===n):null!=o.namespace&&e.namespace!==o.namespace}),0===i.events[e].length&&delete i.events[e])}),!0},trigger:function(e,n){n=l.array(n)?n:[];var i=this,o=[];return e instanceof r.Event?(o.push(e),i.emit(e,n)):l.string(e)&&e.split(" ").forEach(function(e){var t=new r.Event(e);o.push(t),i.emit(t,n)}),l.empty(o)?null:1===o.length?o[0]:o},emit:function(t,n){if(t instanceof FooFields.utils.Event){var e=this;n=l.array(n)?n:[],null===t.target&&(t.target=e),l.array(e.events[t.type])&&e.events[t.type].forEach(function(e){null!=t.namespace&&e.namespace!==t.namespace||e.fn.apply(e.thisArg,[t].concat(n))}),l.array(e.events.__all__)&&e.events.__all__.forEach(function(e){e.fn.apply(e.thisArg,[t].concat(n))})}}}))}(FooFields.utils,FooFields.utils.is,FooFields.utils.str),function(i,o,s){var n;"0.2.2"===o.version&&(o.Bounds=o.Class.extend({construct:function(){var e=this;e.top=0,e.right=0,e.bottom=0,e.left=0,e.width=0,e.height=0},inflate:function(e){var t=this;return s.number(e)&&(t.top-=e,t.right+=e,t.bottom+=e,t.left-=e,t.width+=2*e,t.height+=2*e),t},intersects:function(e){return this.left<=e.right&&e.left<=this.right&&this.top<=e.bottom&&e.top<=this.bottom}}),o.getViewportBounds=function(e){n||(n=i(window));var t=new o.Bounds;return t.top=n.scrollTop(),t.left=n.scrollLeft(),t.width=n.width(),t.height=n.height(),t.right=t.left+t.width,t.bottom=t.top+t.height,t.inflate(e),t},o.getElementBounds=function(e){s.jq(e)||(e=i(e));var t=new o.Bounds;if(0!==e.length){var n=e.offset();t.top=n.top,t.left=n.left,t.width=e.width(),t.height=e.height()}return t.right=t.left+t.width,t.bottom=t.top+t.height,t})}(FooFields.utils.$,FooFields.utils,FooFields.utils.is),function(e,t,i,n,o){"0.2.2"===t.version&&(t.Timer=t.EventClass.extend({construct:function(e){this._super(),this.interval=i.number(e)?e:1e3,this.isRunning=!1,this.isPaused=!1,this.canResume=!1,this.canRestart=!1,this.__timeout=null,this.__decrement=!1,this.__time=0,this.__remaining=0,this.__current=0,this.__finish=0,this.__restart=[]},__reset:function(){clearTimeout(this.__timeout),this.__timeout=null,this.__decrement=!1,this.__time=0,this.__remaining=0,this.__current=0,this.__finish=0,this.isRunning=!1,this.isPaused=!1,this.canResume=!1},__eventArgs:function(e){return[this.__current,this.__time,this.__decrement].concat(n.arg2arr(arguments))},__tick:function(){var e=this;e.trigger("tick",e.__eventArgs()),e.__current===e.__finish?(e.trigger("complete",e.__eventArgs()),e.__reset()):(e.__decrement?e.__current--:e.__current++,e.__remaining--,e.canResume=0<e.__remaining,e.__timeout=setTimeout(function(){e.__tick()},e.interval))},start:function(e,t){var n=this;n.isRunning||(t=!!i.boolean(t)&&t,n.__restart=[e,t],n.__decrement=t,n.__time=e,n.__remaining=e,n.__current=t?e:0,n.__finish=t?0:e,n.canRestart=!0,n.isRunning=!0,n.isPaused=!1,n.trigger("start",n.__eventArgs()),n.__tick())},countdown:function(e){this.start(e,!0)},countup:function(e){this.start(e,!1)},restart:function(){this.stop(),this.canRestart&&this.start.apply(this,this.__restart)},stop:function(){(this.isRunning||this.isPaused)&&(this.__reset(),this.trigger("stop",this.__eventArgs()))},pause:function(){var e=this;return null!=e.__timeout&&(clearTimeout(e.__timeout),e.__timeout=null),e.isRunning&&(e.isRunning=!1,e.isPaused=!0,e.trigger("pause",e.__eventArgs())),e.__remaining},resume:function(){var e=this;e.canResume&&(e.isRunning=!0,e.isPaused=!1,e.trigger("resume",e.__eventArgs()),e.__tick())},reset:function(){this.__reset(),this.trigger("reset",this.__eventArgs())}}))}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.obj),function(u,e,f,d){"0.2.2"===e.version&&(e.Factory=e.Class.extend({construct:function(){this.registered={}},contains:function(e){return!f.undef(this.registered[e])},load:function(e,t,n){var i,o,s=this,r=d.arg2arr(arguments),l=[],a=[];for(i in e=r.shift()||{},s.registered)if(s.registered.hasOwnProperty(i)){var c=s.registered[i];e.hasOwnProperty(i)&&(o=e[i],f.string(o)&&(o=d.fetch(e[i])),f.fn(o)&&(c={name:i,klass:o,priority:s.registered[i].priority})),l.push(c)}for(i in e)e.hasOwnProperty(i)&&!s.registered.hasOwnProperty(i)&&(o=e[i],f.string(o)&&(o=d.fetch(e[i])),f.fn(o)&&l.push({name:i,klass:o,priority:0}));return l.sort(function(e,t){return t.priority-e.priority}),u.each(l,function(e,t){f.fn(t.klass)&&a.push(d.apply(t.klass,r))}),a},make:function(e,t,n){var i,o=d.arg2arr(arguments);return e=o.shift(),i=this.registered[e],f.hash(i)&&f.fn(i.klass)?d.apply(i.klass,o):null},names:function(e){e=!!f.boolean(e)&&e;var t,n=[];if(e){var i=[];for(t in this.registered)this.registered.hasOwnProperty(t)&&i.push(this.registered[t]);i.sort(function(e,t){return t.priority-e.priority}),u.each(i,function(e,t){n.push(t.name)})}else for(t in this.registered)this.registered.hasOwnProperty(t)&&n.push(t);return n},register:function(e,t,n){if(!f.string(e)||f.empty(e)||!f.fn(t))return!1;n=f.number(n)?n:0;var i=this.registered[e];return this.registered[e]={name:e,klass:t,priority:f.undef(i)?n:i.priority},!0}}))}(FooFields.utils.$,FooFields.utils,FooFields.utils.is,FooFields.utils.fn),function(s,e,n){"0.2.2"===e.version&&(e.FullscreenAPI=e.EventClass.extend({construct:function(){this._super(),this.apis={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},this.api=this.getAPI(),this.supported=null!=this.api,this.__listen()},destroy:function(){return this.__stopListening(),this._super()},getAPI:function(){for(var e in this.apis)if(this.apis.hasOwnProperty(e)&&this.apis[e].enabled in document)return this.apis[e];return null},element:function(){return this.supported?document[this.api.element]:null},request:function(e){if(this.supported&&e[this.api.request]){var t=e[this.api.request]();return t||s.Deferred(this.__resolver(this.api.request)).promise()}return n.rejected},exit:function(){if(this.supported&&this.element()){var e=document[this.api.exit]();return e||s.Deferred(this.__resolver(this.api.exit)).promise()}return n.rejected},toggle:function(e){return this.element()?this.exit():this.request(e)},__listen:function(){var e=this;e.supported&&s(document).on(e.api.events.change+".utils",function(){e.trigger("change")}).on(e.api.events.error+".utils",function(){e.trigger("error")})},__stopListening:function(){this.supported&&s(document).off(this.api.events.change+".utils").off(this.api.events.error+".utils")},__resolver:function(i){var o=this;return function(e){function t(){e.resolve(),s(document).off(o.api.events.change,t).off(o.api.events.error,n)}function n(){e.reject(new TypeError),s(document).off(o.api.events.change,t).off(o.api.events.error,n)}i===o.api.exit&&o.element()?setTimeout(function(){e.reject(new TypeError)},1):s(document).on(o.api.events.change,t).on(o.api.events.error,n)}}}))}(FooFields.utils.$,FooFields.utils,FooFields.utils.fn),function(e,t,n,i,o,s){n.strip=function(e,t,n){return i.string(e)&&(i.string(t)&&!i.empty(t)&&o.startsWith(e,t)&&(e=o.from(e,t)),i.string(n)&&!i.empty(n)&&o.endsWith(e,n)&&(e=o.until(e,n))),e},n.expose=function(t,n,e){i.object(t)&&i.object(n)&&i.array(e)&&e.forEach(function(e){i.string(e)&&i.fn(t[e])&&(n[e]=t[e].bind(t))})}}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.str,FooFields.utils.obj),function(o,s,i,r,t,l){s.Instance=i.EventClass.extend({construct:function(){var e=this;e._super(),e.opt=l.extend({},s.config.opt),e.cls=l.extend({},s.config.cls),e.i18n=l.extend({},s.config.i18n),e.sel=i.selectify(e.cls),e.$doc=null,e.mqlSmall=null,e.small=!1,e.mqlHoverable=null,e.hoverable=!1,e.containers=[],e.fieldObserver=new ResizeObserver(t.throttle(e.onFieldResizeObserved.bind(e),1e3/60)),e.onMqlSmallChanged=e.onMqlSmallChanged.bind(e),e.onMqlHoverableChanged=e.onMqlHoverableChanged.bind(e)},init:function(e){var n=this;r.hash(e)&&(l.extend(n.opt,e.opt),l.extend(n.i18n,e.i18n),r.hash(e.cls)&&(l.extend(n.cls,e.cls),n.sel=i.selectify(n.cls))),r.empty(n.opt.on)||n.on(n.opt.on,n),n.$doc=o(document),n.mqlSmall=window.matchMedia("(max-width: "+n.opt.smallScreen+"px)"),n.mqlHoverable=window.matchMedia("(hover: hover)"),n.small=n.mqlSmall.matches,n.hoverable=n.mqlHoverable.matches,n.containers=o(n.sel.container.el).map(function(e,t){return new s.Container(n,t)}).get(),n.trigger("init",[n]),n.containers.forEach(function(e){e.init()}),n.mqlSmall.addListener(n.onMqlSmallChanged),n.mqlHoverable.addListener(n.onMqlHoverableChanged),n.trigger("ready",[n])},reinit:function(){var i=this,e=i.containers.map(function(e){return e.$el.get(0)});o(i.sel.container.el).not(e).each(function(e,t){var n=new s.Container(i,t);i.containers.push(n),n.init()})},destroy:function(){var e=this;e.trigger("destroy",[e]),e.fieldObserver.disconnect(),e.mqlSmall.removeListener(e.onMqlSmallChanged),e.mqlHoverable.removeListener(e.onMqlHoverableChanged),e.containers.forEach(function(e){e.destroy()}),r.empty(e.opt.on)||e.off(e.opt.on,e),e._super()},field:function(e){for(var t,n=0,i=this.containers.length;n<i;n++)if(t=this.containers[n].field(e),t instanceof s.Field)return t},content:function(e){for(var t,n=0,i=this.containers.length;n<i;n++)if(t=this.containers[n].content(e),t instanceof s.Content)return t},container:function(t){if(r.string(t))return t=i.strip(t,"#"),i.find(this.containers,function(e){return e.id===t})},val:function(){return this.containers.reduce(function(e,t){return e[t.id]=t.val(),e},{})},onMqlSmallChanged:function(e){this.trigger("small-changed",[this,this.small=e.matches])},onMqlHoverableChanged:function(e){this.trigger("hoverable-changed",[this,this.hoverable=e.matches])},onFieldResizeObserved:function(e){var n=this;e.forEach(function(e){var t=o(e.target);r.array(e.contentBoxSize)&&0<e.contentBoxSize.length?t.toggleClass(n.cls.small,e.contentBoxSize[0].inlineSize<n.opt.smallField):t.toggleClass(n.cls.small,e.contentRect.width<n.opt.smallField)})}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.obj),function(s,n,e,r,l){n.Component=e.EventClass.extend({construct:function(e,t,n,i){var o=this;o._super(),o.instance=e,o.$el=r.jq(t)?t:s(t),o.cls=n,o.sel=i},isConnected:function(){var e;return!(null===(e=this.$el.get(0))||void 0===e||!e.isConnected)},init:function(){},destroy:function(){this._super()}}),n.CtnrComponent=n.Component.extend({construct:function(e,t,n,i,o){var s=this;s._super(e,n,i,o),s.ctnr=t,s.opt=l.extend({showWhen:{field:null,value:null,operator:null}},s.$el.data()),s.visible=!s.$el.hasClass(s.instance.cls.hidden),s._showWhenFields=[]},init:function(){this.setupVisibilityRules()},destroy:function(){this.teardownVisibilityRules(),this._super()},toggle:function(e){var t=this;t.visible=r.boolean(e)?e:!t.visible,t.$el.toggleClass(t.instance.cls.hidden,!t.visible),t.trigger("toggle",[t.visible,t]),t.ctnr.trigger("toggle",[t,t.visible])},getShowWhenRules:function(){var e=this.opt.showWhen;return r.array(e)?e.filter(function(e){return r.object(e)&&!r.empty(e.field)}):r.object(e)&&!r.empty(e.field)?[e]:[]},setupVisibilityRules:function(){var e=this,t=e.getShowWhenRules();if(0<t.length){var i={};t.forEach(function(t){var o=e.instance.field(t.field);o instanceof n.Field&&!0!==i[o.id]&&(i[o.id]=!0,e._showWhenFields.push(o),o.on({change:e.onShowWhenFieldChanged,toggle:e.onShowWhenFieldToggled},e))}),0<e._showWhenFields.length?e.visible=e.checkVisibilityRules():e.visible=!1}e.toggle(e.visible)},teardownVisibilityRules:function(){var e=this;e._showWhenFields.forEach(function(t){t.off({change:e.onShowWhenFieldChanged,toggle:e.onShowWhenFieldToggled},e)}),e._showWhenFields=[]},checkVisibilityRule:function(e,t){var n=e.value;switch(e.operator){case"!==":return t!==n;case"regex":return new RegExp(n).test(t);case"indexOf":return r.string(t)||r.array(t)?-1!==t.indexOf(n):!1;default:return t===n}},checkVisibilityRules:function(e){var t=this,i=t.getShowWhenRules();if(0===i.length)return!0;if(1===i.length){var o=i[0],s=t.instance.field(o.field);return s instanceof n.Field&&s.visible?t.checkVisibilityRule(o,r.undef(e)?s.val():e):!1}for(var l=0,a=i.length;l<a;l++){var c=i[l],u=t.instance.field(c.field);if(!(u instanceof n.Field)||!u.visible||!t.checkVisibilityRule(c,u.val()))return!1}return!0},onShowWhenFieldChanged:function(e,t,n){n.visible?this.toggle(this.checkVisibilityRules(t)):this.toggle(!1)},onShowWhenFieldToggled:function(e,t,n){t?this.toggle(this.checkVisibilityRules(n.val())):this.toggle(!1)}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,o,i,s,t){o.Container=o.Component.extend({construct:function(e,t){var n=this;n._super(e,t,e.cls.container,e.sel.container),n.id=n.$el.attr("id"),n.$state=n.$el.children('input[type="hidden"][name*="__state"]'),n.$tabContainer=n.$el.children(n.sel.tabs.el),n.$tabs=n.$tabContainer.children(n.sel.tabs.tab.el),n.contents=n.$el.children(n.sel.content.el).map(function(e,t){return new o.Content(n,t)}).get(),n.tabs=n.$tabs.map(function(e,t){return new o.Tab(n,t,e)}).get()},init:function(){var e=this,t=null;e.$el.toggleClass(e.cls.tabs.exists,0<e.tabs.length),e.setSmall(e.instance.small),e.setHoverable(e.instance.hoverable),e.contents.forEach(function(e){e.init(),null===t&&e.active&&(t=e)}),e.tabs.forEach(function(e){e.init()});var n=e.$state.val();s.empty(n)||(t=e.content(n)),!t&&0<e.contents.length&&(t=e.contents[0]),t instanceof o.Content&&e.activate(t.id),e.instance.on({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e)},destroy:function(){var e=this;e.instance.off({"small-changed":e.onSmallChanged,"hoverable-changed":e.onHoverableChanged},e),e.$el.removeClass(e.cls.tabs.exists),e.tabs.forEach(function(e){e.destroy()}),e.contents.forEach(function(e){e.destroy()})},activate:function(t){var n=this;n.tabs.forEach(function(e){e.activate(t)}),n.contents.forEach(function(e){e.activate(t),e.id===t&&n.$state.val(t)})},toggle:function(t,n){s.string(t)&&(t=i.strip(t,"#"),this.tabs.forEach(function(e){e.target===t?e.toggle(n):e.menu.exists&&e.menu.items.forEach(function(e){e.target===t&&e.toggle(n)})}),this.contents.forEach(function(e){e.id===t&&e.toggle(n)}))},field:function(e){for(var t,n=0,i=this.contents.length;n<i;n++)if(t=this.contents[n].field(e),t instanceof o.Field)return t},content:function(t){if(s.string(t))return t=i.strip(t,"#"),i.find(this.contents,function(e){return e.id===t})},val:function(){return this.contents.reduce(function(e,t){return e[t.id]=t.val(),e},{})},setSmall:function(e){this.$el.toggleClass(this.instance.cls.small,!!e)},setHoverable:function(e){this.$el.toggleClass(this.instance.cls.hoverable,!!e)},onSmallChanged:function(e,t,n){this.setSmall(n)},onHoverableChanged:function(e,t,n){this.setHoverable(n)}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,o,s,t,n){o.Tab=o.CtnrComponent.extend({construct:function(e,t,n){var i=this;i._super(e.instance,e,t,e.cls.tabs.tab,e.sel.tabs.tab),i.el=i.$el.get(0),i.index=n,i.$link=i.$el.children(i.sel.link).first(),i.$icon=i.$link.children(i.sel.icon).first(),i.$text=i.$link.children(i.sel.text).first(),i.target=s.strip(i.$link.attr("href"),"#"),i.active=i.$el.hasClass(i.instance.cls.active),i.menu=new o.TabMenu(i,i.$el.children(i.sel.menu.el))},init:function(){var e=this;e.$el.toggleClass(e.instance.cls.first,0===e.index).toggleClass(e.instance.cls.last,e.index===e.ctnr.tabs.length-1),e.$link.on("click.foofields",{self:e},e.onLinkClick),e._super(),e.menu.init()},destroy:function(){var e=this;e.$el.removeClass(e.instance.cls.first).removeClass(e.instance.cls.last),e.$link.off(".foofields"),e._super(),e.menu.destroy()},handles:function(e){return this.target===e||this.menu.handles(e)},activate:function(e){var t=this;t.$el.toggleClass(t.instance.cls.active,t.active=t.handles(e)),t.menu.exists&&t.menu.activate(e)},onLinkClick:function(e){e.preventDefault();var t=e.data.self;t.menu.exists&&t.instance.small&&!t.instance.hoverable?t.menu.toggle():t.ctnr.activate(t.target)},onShowWhenFieldChanged:function(e,t,n){var i=this;n.visible?i.ctnr.toggle(i.target,i.checkVisibilityRules(t)):i.ctnr.toggle(i.target,!1)},onShowWhenFieldToggled:function(e,t,n){var i=this;t?i.ctnr.toggle(i.target,i.checkVisibilityRules(n.val())):i.ctnr.toggle(i.target,!1)}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(i,o,e,n){o.TabMenu=o.CtnrComponent.extend({construct:function(e,t){var n=this;n._super(e.instance,e.ctnr,t,e.cls.menu,e.sel.menu),n.tab=e,n.$header=i("<li/>",{class:n.cls.header}).append(e.$text.clone()),n.items=n.$el.children(n.sel.item.el).map(function(e,t){return new o.TabMenuItem(n,t,e)}).get(),n.exists=0<n.items.length,n.visible=e.$el.hasClass(n.cls.visible),n._enter=null,n._leave=null,n.onDocumentClick=n.onDocumentClick.bind(n),n.onTabMouseEnter=n.onTabMouseEnter.bind(n),n.onTabMouseLeave=n.onTabMouseLeave.bind(n)},init:function(){var t=this;t.exists&&(t.tab.$el.addClass(t.cls.exists),t.$header.on("click",{self:t},t.onHeaderClick),t.items.forEach(function(e){e.on("toggle",t.onItemToggled,t),e.init()}),t.setSmall(t.instance.small),t.setHoverable(t.instance.hoverable),t.instance.on({"small-changed":t.onSmallChanged,"hoverable-changed":t.onHoverableChanged},t))},destroy:function(){var t=this;t.exists&&(t.instance.off({"small-changed":t.onSmallChanged,"hoverable-changed":t.onHoverableChanged},t),t.toggle(!1),t.setSmall(!1),t.setHoverable(!1),t.tab.$el.removeClass(t.cls.exists),t.items.forEach(function(e){e.off("toggle",t.onItemToggled,t),e.destroy()}))},toggle:function(e){var t=this;t.exists&&(t.visible=n.undef(e)?!t.visible:!!e,t.tab.$el.toggleClass(t.cls.visible,t.visible),t.ctnr.$tabContainer.toggleClass(t.cls.showing,0<t.ctnr.$tabs.filter(t.sel.visible).length),t.visible?t.instance.$doc.off("click.foofields-menu_"+t.tab.index).on("click.foofields-menu_"+t.tab.index,t.onDocumentClick):t.instance.$doc.off("click.foofields-menu_"+t.tab.index))},item:function(t){if(this.exists)return e.find(this.items,function(e){return e.target===t})},handles:function(e){return this.item(e)instanceof o.TabMenuItem},activate:function(t){this.exists&&this.items.forEach(function(e){e.activate(t)})},setSmall:function(e){e?this.$el.prepend(this.$header):this.$header.remove()},setHoverable:function(e){var t=this;e?t.tab.$el.off({"mouseenter.foofields":t.onTabMouseEnter,"mouseleave.foofields":t.onTabMouseLeave}).on({"mouseenter.foofields":t.onTabMouseEnter,"mouseleave.foofields":t.onTabMouseLeave}):(t.tab.$el.off({"mouseenter.foofields":t.onTabMouseEnter,"mouseleave.foofields":t.onTabMouseLeave}),clearTimeout(t._enter),clearTimeout(t._leave),t._enter=null,t._leave=null)},onSmallChanged:function(e,t,n){this.setSmall(n)},onHoverableChanged:function(e,t,n){this.setHoverable(n)},onHeaderClick:function(e){e.preventDefault();var t=e.data.self;t.ctnr.activate(t.tab.target)},onDocumentClick:function(e){i.contains(this.tab.el,e.target)||this.toggle(!1)},onTabMouseEnter:function(){var e=this;clearTimeout(e._leave),(e._leave=null)===e._enter&&(e._enter=setTimeout(function(){e.toggle(!0),e._enter=null},300))},onTabMouseLeave:function(){var e=this;clearTimeout(e._enter),(e._enter=null)===e._leave&&(e._leave=setTimeout(function(){e.toggle(!1),e._leave=null},300))},onItemToggled:function(){var e=this,t=e.items.some(function(e){return e.visible});e.tab.$el.toggleClass(e.cls.exists,t),e.$el.toggleClass(e.cls.empty,!t),e.setSmall(t&&e.instance.small),e.setHoverable(t&&e.instance.hoverable),e.exists=t}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is),function(e,t,o,n,i){t.TabMenuItem=t.CtnrComponent.extend({construct:function(e,t,n){var i=this;i._super(e.instance,e.ctnr,t,e.cls.item,e.sel.item),i.menu=e,i.index=n,i.active=i.$el.hasClass(i.instance.cls.active),i.$link=i.$el.children(i.sel.link).first(),i.$text=i.$link.children(i.sel.text).first(),i.target=o.strip(i.$link.attr("href"),"#")},init:function(){var e=this;e.$el.toggleClass(e.instance.cls.first,0===e.index).toggleClass(e.instance.cls.last,e.index===e.menu.items.length-1),e.$link.on("click.foofields",{self:e},e.onLinkClick),e._super()},destroy:function(){var e=this;e.$el.removeClass(e.instance.cls.first).removeClass(e.instance.cls.last),e.$link.off(".foofields"),e._super()},activate:function(e){this.$el.toggleClass(this.instance.cls.active,this.active=this.target===e)},onLinkClick:function(e){e.preventDefault(),e.stopPropagation();var t=e.data.self;t.ctnr.activate(t.target)},onShowWhenFieldChanged:function(e,t,n){var i=this;if(n.visible){var o=i.checkVisibilityRules(t);o&&!i.menu.exists&&(i.menu.exists=!0),i.ctnr.toggle(i.target,o)}else i.ctnr.toggle(i.target,!1)},onShowWhenFieldToggled:function(e,t,n){var i=this;if(t){var o=i.checkVisibilityRules(n.val());o&&!i.menu.exists&&(i.menu.exists=!0),i.ctnr.toggle(i.target,o)}else i.ctnr.toggle(i.target,!1)}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,s,r,t,n){s.Content=s.CtnrComponent.extend({construct:function(e,t){var n=this;n._super(e.instance,e,t,e.cls.content,e.sel.content),n.id=n.$el.attr("id"),n.active=n.$el.hasClass(n.instance.cls.active),n.fields=n.$el.children(n.sel.field).map(function(e,t){return s.fields.create(n,t)}).get()},init:function(){var e=this;e.$el.toggleClass(e.instance.cls.active,e.active),e._super(),e.fields.forEach(function(e){e.init()})},destroy:function(){this.fields.forEach(function(e){e.destroy()}),this._super()},activate:function(e){this.$el.toggleClass(this.instance.cls.active,this.active=this.id===e)},field:function(t){var n=[],e=r.find(this.fields,function(e){return e instanceof s.FieldGroup&&n.push(e),e.id===t});if(!(e instanceof s.Field))for(var i=0,o=n.length;i<o;i++)if((e=n[i].field(t))instanceof s.Field)return e;return e},val:function(){return this.fields.reduce(function(e,t){return e[t.id]=t.val(),e},{})},onShowWhenFieldChanged:function(e,t,n){var i=this;n.visible?i.ctnr.toggle(i.id,i.checkVisibilityRules(t)):i.ctnr.toggle(i.id,!1)},onShowWhenFieldToggled:function(e,t,n){var i=this;t?i.ctnr.toggle(i.id,i.checkVisibilityRules(n.val())):i.ctnr.toggle(i.id,!1)}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(l,e,t,d,h){e.Fields=t.Factory.extend({construct:function(){this.registered={}},register:function(e,t,n,i,o,s,r){if(!d.string(n))return!1;if(this._super(e,t,r)){var l=this.registered[e];return l.selector=n,l.options=d.hash(i)?i:{},l.classes=d.hash(o)?o:{},l.i18n=d.hash(s)?s:{},!0}return!1},make:function(e,t,n,i,o,s){var r=this.registered[e];if(d.hash(r)){i=d.hash(i)?i:{},o=d.hash(o)?o:{},s=d.hash(s)?s:{};var l=t.instance,a=this.bases(e),c=[{}],u=[{}],f=[{}];return a.push(this.registered[e]),a.push({options:l.opt.fields[e],classes:l.cls.fields[e],i18n:l.i18n.fields[e]}),a.forEach(function(e){c.push(e.options),u.push(e.classes),f.push(e.i18n)}),c.push(i),u.push(s),f.push(o),i=h.extend.apply(h,c),s=h.extend.apply(h,u),o=h.extend.apply(h,f),this._super(e,t,n,i,s,o)}return null},create:function(e,t,n,i,o){var s,r=this;for(s in t=d.jq(t)?t:l(t),n=h.extend({i18n:{},classes:{}},n,t.data()),i=h.extend({},i,n.i18n),o=h.extend({},o,n.classes),delete n.i18n,delete n.classes,r.registered)if(r.registered.hasOwnProperty(s)&&"field"!==s&&t.is(r.registered[s].selector))return r.make(s,e,t,n,i,o);return r.make("field",e,t,n,i,o)},bases:function(e){if(!this.contains(e))return[];var n=this,t=n.registered[e].klass.bases(),i=[];return t.forEach(function(e){var t=n.find(e);null!==t&&i.push(t)}),i},find:function(e){var t,n=this.registered;for(t in n)if(n.hasOwnProperty(t)&&n[t].klass===e)return n[t];return null}}),e.fields=new e.Fields}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(l,e,r,a){e.Field=e.CtnrComponent.extend({construct:function(e,t,n,i,o){var s=this;s._super(e.instance,e.ctnr,t,i,r.selectify(i)),s.content=e,s.opt=n,s.i18n=o,s.id=s.$el.attr("id"),s.$label=s.$el.children(s.sel.label),s.$input=s.$el.children(s.sel.input),s.$change=s.$el.find(s.opt.changeSelector),s.$value=s.$el.find(s.opt.valueSelector)},init:function(){var e=this;e.$change.on("change",{self:e},e.onValueChanged),e.setup(),e._super(),e.trigger("init",[e]),e.instance.fieldObserver.observe(e.$el.get(0))},setup:function(){},destroy:function(){var e=this;e.instance.fieldObserver.unobserve(e.$el.get(0)),e.trigger("destroy",[e]),e.$change.off("change",e.onValueChanged),e.teardown(),e._super()},teardown:function(){},toggle:function(e){this._super(e),this.visible?this.enable():this.disable()},disable:function(){this.$el.find(":input").prop("disabled",!0)},enable:function(){this.$el.find(":input").prop("disabled",!1)},val:function(o){var s=this,e=s.$value,t=e.is(":radio"),n=1===e.length;if(a.undef(o)){a.string(s.opt.valueFilter)&&(e=e.filter(s.opt.valueFilter));var i=e.map(function(){var e=l(this);return null!==s.opt.valueAttribute?e.attr(s.opt.valueAttribute):e.is(":checkbox")&&n?e.is(":checked"):e.val()}).get();return(n||t)&&0<i.length?0===i.length?null:i[0]:t?"":i}var r=!1;e.each(function(e){var t=l(this),n=null,i=null;null!==s.opt.valueAttribute?(i=a.string(o)?o:JSON.stringify(o),n=t.attr(s.opt.valueAttribute),t.attr(s.opt.valueAttribute,i)):t.is(":checkbox,:radio")?(a.boolean(o)?i=o:a.array(o)?i=-1!==o.indexOf(t.val()):a.string(o)&&(i=t.val()===o),null!==i&&(n=t.prop("checked"),t.prop("checked",i))):(n=(i=a.array(o)?e<o.length?o[e]:"":o,t.val()),t.val(i)),r||(r=n!==i)}),r&&s.doValueChanged()},doValueChanged:function(){var e=this,t=e.val();e.trigger("change",[t,e]),e.ctnr.trigger("change",[e,t])},onValueChanged:function(e){e.data.self.doValueChanged()}}),e.fields.register("field",e.Field,".foofields-field",{showWhen:{field:null,value:null,operator:null},changeSelector:":input",valueSelector:":input",valueFilter:null,valueAttribute:null},{el:"foofields-field",label:"foofields-label",input:"foofields-field-input"},{})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is),function(o,e,t,n){e.AjaxButton=e.Field.extend({setup:function(){var i=this;i.$button=i.$input.find("a:first"),i.$spinner=i.$input.find(".spinner"),i.$message=i.$input.find(".response-message"),i.$button.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.$message.hide(),i.$spinner.addClass("is-active");var t={action:"foofields_"+i.id,nonce:i.opt.nonce},n=o("#post_ID");n.length&&(t.postID=n.val()),o.ajax({url:window.ajaxurl,type:"POST",data:t,error:function(){i.$message.text("An unexpected error occurred!").addClass("error").show()},success:function(e){e&&(e.success?e.data.message&&i.$message.text(e.data.message).addClass("success").show():e.data.message&&i.$message.text(e.data.message).addClass("error").show())},complete:function(){i.$spinner.removeClass("is-active")}})})}}),e.fields.register("ajaxbutton",e.AjaxButton,".foofields-type-ajaxbutton",{},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,o,n,i){e.fn.wpColorPicker?(t.ColorPicker=t.Field.extend({setup:function(){var e=this;e.debouncedId=null,e.$pickers=e.$input.children("input[type=text]").wpColorPicker({change:e.onColorPickerChange.bind(e),clear:e.onColorPickerClear.bind(e)})},val:function(e){var t=this.$pickers.val();if(o.undef(e))return t;this.$pickers.wpColorPicker("color",e)},doValueChanging:function(e){this.trigger("changing",[e,this]),this.ctnr.trigger("changing",[this,e])},onColorPickerClear:function(){this.doValueChanged()},onColorPickerChange:function(e,t,n){var i=this;i.doValueChanging(o.string(n)?n:t.color.toString()),null!==i.debouncedId&&clearTimeout(i.debouncedId),i.debouncedId=setTimeout(function(){i.debouncedId=null,i.doValueChanged()},100)}}),t.fields.register("colorpicker",t.ColorPicker,".foofields-type-colorpicker",{},{},{})):console.log("FooFields.ColorPicker dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.obj),function(t,e,n,i){e.EmbedMetabox=e.Field.extend({setup:function(){var e=this;e.$container=e.$input.children("div").first(),e.$metabox=t("#"+e.$container.data("metabox")),e.$metabox.removeClass("closed"),e.$metabox.detach().appendTo(e.$container)}}),e.fields.register("embed-metabox",e.EmbedMetabox,".foofields-type-embed-metabox",{},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,r,s,n,t){r.FieldGroup=r.Field.extend({construct:function(e,t,n,i,o){var s=this;s._super(e,t,n,i,o),s.fields=s.$el.children(s.sel.el).map(function(e,t){return r.fields.create(s,t)}).get(),s._changeId=null},init:function(){var t=this;t._super(),t.fields.forEach(function(e){e.on("change",t.onFieldChange,t),e.init()})},destroy:function(){var t=this;null!==t._changeId&&clearTimeout(t._changeId),t._changeId=null,t.fields.forEach(function(e){e.off("change",t.onFieldChange,t),e.destroy()}),t._super()},field:function(t){var n=[],e=s.find(this.fields,function(e){return e instanceof r.FieldGroup&&n.push(e),e.id===t});if(!(e instanceof r.Field))for(var i=0,o=n.length;i<o;i++)if((e=n[i].field(t))instanceof r.Field)return e;return e},val:function(t){if(!n.object(t))return this.fields.reduce(function(e,t){return e[t.id]=t.val(),e},{});this.fields.forEach(function(e){t.hasOwnProperty(e.id)&&e.val(t[e.id])})},doValueChanged:function(){var e=this.val();this.trigger("change",[e,this])},onFieldChange:function(){var e=this;null!==e._changeId&&clearTimeout(e._changeId),e._changeId=setTimeout(function(){e._changeId=null,e.doValueChanged()},50)}}),r.fields.register("field-group",r.FieldGroup,".foofields-type-field-group",{changeSelector:"code.fbr-does-not-exist",valueSelector:"code.fbr-does-not-exist"},{},{})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i,o){t.Input=t.Field.extend({setup:function(){var e=this;e.currentValue=e.val(),e.debouncedId=null,e.$change.off("change",e.onValueChanged).on("input.foofields",{self:e},e.onInputChange)},teardown:function(){clearTimeout(this.debouncedId),this.$change.off(".foofields")},onInputChange:function(e){var t=e.data.self,n=t.val();n!==t.currentValue&&(t.currentValue=n,t.doValueChanged())}}),t.fields.register("input",t.Input,".foofields-type-text,.foofields-type-textarea",{},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.fn,FooFields.utils.obj),function(e,t,n,i){t.InputList=t.Field.extend({setup:function(){var e=this;e.currentValue=e.val(),e.$change.off("change",e.onValueChanged).on("input.foofields",{self:e},e.onInputChange)},teardown:function(){this.$change.off(".foofields")},onInputChange:function(e){var t=e.data.self,n=t.val();n!==t.currentValue&&(t.currentValue=n,t.doValueChanged())},doValueChanged:function(){var e=this;e.$input.removeClass(e.instance.cls.selected).filter(e.opt.valueFilter).addClass(e.instance.cls.selected),e._super()}}),t.fields.register("inputlist",t.InputList,".foofields-type-radiolist,.foofields-type-checkboxlist,.foofields-type-htmllist",{changeSelector:"[type='checkbox'],[type='radio']",valueSelector:"[type='checkbox'],[type='radio']",valueFilter:":checked"},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(i,u,f,e){u.MetaboxList=u.Field.extend({setup:function(){var e=this;e.$labels=e.$change.parents("label"),e.$change.off("change",e.onValueChanged).on("input.foofields",{self:e},e.onInputChange)},teardown:function(){this.$change.off(".foofields")},onInputChange:function(e){e.data.self.doValueChanged()},doValueChanged:function(){var e=this;e.$labels.removeClass(e.instance.cls.selected).filter(":has(input:checked)").addClass(e.instance.cls.selected),e._super(),e.opt.nonce&&e.opt.target&&e.doCallback()},doCallback:function(){var s=this,e=s.val(),t={action:"foofields_"+s.id,value:e,nonce:s.opt.nonce},n=i("#post_ID");n.length&&(t.postID=n.val()),s.disable();var r=i('label[for="'.concat(s.opt.target,'-hide"]')),l=i("#"+s.opt.target).addClass(s.instance.cls.loading),a=function(e,t){var n=u.__instance__.container(s.opt.target+"-container");if(n){var i=u.__instance__.containers.indexOf(n);u.__instance__.containers.splice(i,1),n.destroy()}var o=l.find(".postbox-header h2").html(e);l.find(".inside").html(t),r.contents().filter(function(e,t){return 3===t.nodeType}).replaceWith(document.createTextNode(o.text())),u.__instance__.reinit()},c=function(e){var t="<p>An unknown error occurred attempting to load the metabox from the server.</p>";f.string(e)&&(t=e),e instanceof Error&&(t=e.message),a("Error Loading Metabox",t)};return i.ajax({url:window.ajaxurl,type:"POST",data:t}).done(function(e){var t;if(null!=e&&e.success&&f.hash(null==e||null===(t=e.data)||void 0===t?void 0:t.metabox)){var n=e.data.metabox,i=n.title,o=void 0===i?"":i,s=n.html;a(o,void 0===s?"":s)}else c(null==e?void 0:e.message)}).fail(function(e){return c(e)}).always(function(){l.removeClass(s.instance.cls.loading),s.enable()})}}),u.fields.register("metaboxlist",u.MetaboxList,".foofields-type-metaboxlist",{changeSelector:"[type='checkbox'],[type='radio']",valueSelector:"[type='checkbox'],[type='radio']",valueFilter:":checked"},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,r,t,n){r.Repeater=r.Field.extend({construct:function(e,t,n,i,o){var s=this;s._super(e,t,n,i,o),s.$addButton=s.$input.children(s.sel.add),s.$table=s.$input.children("table").first(),s.$tbody=s.$table.children("tbody").first(),s.$template=s.$table.children("tfoot").first().children("tr").first(),s.rows=s.$tbody.children("tr").map(function(e,t){return new r.RepeaterRow(s,t)}).get()},init:function(){var o,s,r=this;r._super(),r.$addButton.on("click.foofields",{self:r},r.onAddNewClick),r.rows.forEach(function(e){e.init()}),r.$tbody.sortable({cancel:":input",forcePlaceholderSize:!0,placeholder:"foofields-repeater-placeholder",items:"> tr",distance:5,start:function(e,t){s=t.item.index(),o=r.rows[s],t.placeholder.height(t.item.height()),t.placeholder.width(t.item.width())},update:function(e,t){var n=t.item.index(),i=s<n?s:n;r.$tbody.children("tr").eq(i).nextAll("tr").addBack().trigger("index-change"),r.trigger("moved",[o,n,s]),r.doValueChanged()}})},destroy:function(){try{this.$tbody.sortable("destroy")}catch(e){}this.rows.forEach(function(e){e.destroy()}),this.$addButton.off(".foofields"),this._super()},addNewRow:function(){var e=this,t=e.$template.clone();e.$tbody.append(t).sortable("refresh");var n=new r.RepeaterRow(e,t);return e.rows.push(n),n.init(!0),e.$el.removeClass(e.cls.empty),e.doValueChanged(),n},remove:function(e){var t=this,n=e.$el.nextAll("tr");e.$el.remove(),t.$tbody.sortable("refresh");var i=t.rows.indexOf(e);-1!==i&&t.rows.splice(i,1),0===t.$tbody.children("tr").length&&t.$el.addClass(t.cls.empty),n.trigger("index-change"),t.doValueChanged()},onAddNewClick:function(e){e.preventDefault(),e.stopPropagation(),e.data.self.addNewRow()},toggle:function(e){this._super(e),this.$template.find(":input").attr("disabled","disabled")},val:function(n){if(!t.array(n))return this.rows.sort(function(e,t){return e.index-t.index}).map(function(e){return e.val()});this.rows.forEach(function(e,t){e.val(t<n.length?n[t]:[])})},doValueChanged:function(){var e=this,t=e.val();e.trigger("change",[t,e]),e.ctnr.trigger("change",[e,t])}}),r.fields.register("repeater",r.Repeater,".foofields-type-repeater",{},{add:"foofields-repeater-add",empty:"foofields-empty"},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(n,e,t,i){e.RepeaterDelete=e.Field.extend({setup:function(){var e=this;e.$button=e.$input.find(e.sel.button).on("click.foofields",{self:e},e.onClick)},teardown:function(){this.$button.off(".foofields")},onClick:function(e){e.preventDefault(),e.stopPropagation();var t=n(this).data("confirm");t&&confirm(t)&&e.data.self.content.remove()}}),e.fields.register("repeater-delete",e.RepeaterDelete,".foofields-type-repeater-delete",{},{button:"foofields-repeater-delete"},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i){t.RepeaterIndex=t.Field.extend({setup:function(){this.content.on("index-change",this.onIndexChange,this)},teardown:function(){this.content.off("index-change")},onIndexChange:function(e,t){this.$input.text(i.format(this.opt.format,{index:t,count:t+1}))}}),t.fields.register("repeater-index",t.RepeaterIndex,".foofields-type-repeater-index",{format:"{count}"},{},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.str),function(r,i,e,l,t){i.RepeaterRow=i.Component.extend({construct:function(e,t){var n=this;n._super(e.instance,t,e.cls,e.sel),n.repeater=e,n.ctnr=e.ctnr,n.index=n.$el.index(),n.$cells=n.$el.children("td,th"),n.fields=n.$cells.children(n.sel.el).map(function(e,t){return i.fields.create(n,t)}).get(),n.regex={id:/(_)-?\d+([_-].*?)?$/i,name:/(\[.*?]\[)-?\d+(]\[.*?])$/i}},init:function(e){var t=this;t._super(),t.$el.on("index-change.foofields",{self:t},t.onIndexChange),t.fields.forEach(function(e){e.on("change",t.onFieldChange,t),e.init()}),e&&t.reindex(!0)},destroy:function(){var t=this;t.fields.forEach(function(e){e.off("change",t.onFieldChange,t),e.destroy()}),t._super()},remove:function(){this.repeater.remove(this)},reindex:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this,i=n.$el.index();(e||n.index!==i)&&(n.index=i,n.fields.forEach(function(e){e.id=n.update(e.$el,i),e.$el.find("[id],[name]").each(function(e,t){n.update(t,i)})}),n.trigger("index-change",[i,n]),n.repeater.trigger("index-change",[i,n]))},update:function(e,t){var n=(e=l.jq(e)?e:r(e)).prop("id");if(l.string(n)){var i=n.replace(this.regex.id,"$1"+t+"$2");i!==n&&(e.prop("id",i),n=i)}var o=e.prop("name");if(l.string(o)){var s=o.replace(this.regex.name,"$1"+t+"$2");s!==o&&e.prop("name",s)}return n},field:function(t){return e.find(this.fields,function(e){return e.id===t})},onIndexChange:function(e){e.data.self.reindex()},onFieldChange:function(){this.repeater.doValueChanged()},enable:function(){this.fields.forEach(function(e){e.enable()})},val:function(n){var e=this.fields.filter(function(e){return!(e instanceof i.RepeaterIndex||e instanceof i.RepeaterDelete)});if(!l.array(n))return e.map(function(e){return e.val()});e.forEach(function(e,t){e.val(t<n.length?n[t]:"")})}})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj),function(i,e,t,o){window.Selectize?(e.Selectize=e.Field.extend({setup:function(){var n=this;if(n.$select=n.$input.children("select").first(),n.$select.length){n.$display=n.$input.children("input[type=hidden]").first();var e=o.extend({},n.opt.selectize,{onChange:function(e){if(n.api instanceof window.Selectize){var t=n.api.getItem(e);n.$display.val(t.text())}},load:function(e,t){i.get(window.ajaxurl+"?"+n.opt.query,{q:e}).done(function(e){t(e.results)}).fail(function(){t()})}});n.api=n.$select.selectize(e).get(0).selectize}},val:function(e){return this.api?t.undef(e)?this.api.getValue():(this.api.setValue(e),void this.doValueChanged()):""},teardown:function(){this.api instanceof Selectize&&this.api.destroy()},enable:function(){this.api instanceof Selectize&&this.api.enable()},disable:function(){this.api instanceof Selectize&&this.api.disable()}}),e.fields.register("selectize",e.Selectize,".foofields-type-selectize",{query:null,selectize:{valueField:"id",labelField:"text",searchField:"text",maxItems:1,create:!1,options:[]}},{},{})):console.log("FooFields.Selectize dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,o){window.Selectize?(t.SelectizeMulti=t.Field.extend({setup:function(){var i=this;if(i.$select=i.$input.children("select").first(),i.create=!1,i.opt.create&&(i.create=function(e,t){this.close(),i.$input.children(".selectize-control").addClass("loading");var n={action:i.opt.action,nonce:i.opt.nonce,add:e};jQuery.ajax({url:window.ajaxurl,cache:!1,type:"GET",data:n,complete:function(){i.$input.children(".selectize-control").removeClass("loading")},success:function(e){void 0!==e.new?t({value:e.new.value,text:e.new.display}):t(!1)},error:function(){t(!1)}})}),i.$select.length){o.extend(i.opt,i.$select.data());var e=o.extend({},i.opt.selectize,{onChange:function(e){if(i.api instanceof window.Selectize)i.api.getItem(e)},create:i.create});i.api=i.$select.selectize(e).get(0).selectize}},teardown:function(){this.api instanceof Selectize&&this.api.destroy()},enable:function(){this.api instanceof Selectize&&this.api.enable()},disable:function(){this.api instanceof Selectize&&this.api.disable()},val:function(e){return this.api?n.undef(e)?this.api.getValue():(this.api.setValue(e),void this.doValueChanged()):""}}),t.fields.register("selectize-multi",t.SelectizeMulti,".foofields-type-selectize-multi",{selectize:{plugins:["remove_button"],delimiter:", ",createOnBlur:!0,maxItems:null,closeAfterSelect:!0,items:null}},{},{})):console.log("FooFields.Selectize dependency missing.")}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(r,e,t,n){e.Suggest=e.Field.extend({construct:function(e,t,n,i,o){var s=this;s._super(e,t,n,i,o),s._timeout=null,s._prevLength=0,s._cache=[],s._cacheSize=0,s._$window=r(window),s._endpoint=""},setup:function(){var e=this;e._endpoint=window.ajaxurl+"?"+e.opt.query,e.$suggest=e.$input.children("input[type=text]").first(),e.$suggest.attr("autocomplete","off").on({blur:e.onBlur,keydown:e.onKeydown},{self:e}),e.$suggestions=r("<ul/>").addClass(e.cls.results),e.$suggestions.appendTo("body")},resetPosition:function(){var e=this.$suggest.offset(),t=e.top+this.$suggest.prop("offsetHeight");this.$suggestions.css({top:t+"px",left:e.left+"px"})},query:function(){var e,t,n=this,i=n.$suggest.val().trim();if(n.opt.multiple&&-1!==(e=i.lastIndexOf(n.opt.multipleSep))&&(i=i.substring(e+n.opt.multipleSep.length).trim()),i.length>=n.opt.minchars){var o=n.checkCache(i);o?n.displayItems(o.items):r.get(n._endpoint,{q:i},function(e){n.$suggestions.hide(),t=n.parseTxt(e,i),n.displayItems(t),n.addToCache(i,t,e.length)})}else n.$suggestions.hide()},displayItems:function(e){if(e){var t=this;if(e.length){t.resetPosition();var n=e.reduce(function(e,t){return e+="<li>"+t+"</li>"},"");t.$suggestions.html(n).show(),t.$suggestions.children("li").on({mouseover:t.onItemMouseover,click:t.onItemClick},{self:t})}else t.$suggestions.hide()}},checkCache:function(e){var t,n=this;for(t=0;t<n._cache.length;t++)if(n._cache[t].q===e)return n._cache.unshift(n._cache.splice(t,1)[0]),n._cache[0];return!1},addToCache:function(e,t,n){for(var i,o=this;o._cache.length&&o._cacheSize+n>o.opt.maxCacheSize;)i=o._cache.pop(),o._cacheSize-=i.size;o._cache.push({q:e,size:n,items:t}),o._cacheSize+=n},onBlur:function(e){var t=e.data.self;setTimeout(function(){t.$suggestions.hide()},200)},onKeydown:function(e){var t=e.data.self;if(/27$|38$|40$/.test(e.keyCode)&&t.$suggestions.is(":visible")||/^13$|^9$/.test(e.keyCode)&&t.getCurrentResult())switch(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,e.keyCode){case 38:t.prevResult();break;case 40:t.nextResult();break;case 9:case 13:t.selectCurrentResult();break;case 27:t.$suggestions.hide()}else t.$suggest.val().length!==t._prevLength&&(t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.query()},t.opt.delay),t._prevLength=t.$suggest.val().length)},onItemMouseover:function(e){var t=e.data.self;t.$suggestions.children("li").removeClass(t.cls.select),r(this).addClass(t.cls.select)},onItemClick:function(e){e.preventDefault(),e.stopPropagation(),e.data.self.selectCurrentResult()},parseTxt:function(e,i){var o=this;return e.split(o.opt.delimiter).reduce(function(e,t){var n=t.trim();return n.length&&(n=n.replace(new RegExp(i,"ig"),function(e){return'<span class="'+o.cls.match+'">'+e+"</span>"}),e.push(n)),e},[])},getCurrentResult:function(){if(!this.$suggestions.is(":visible"))return!1;var e=this.$suggestions.children("li."+this.cls.select);return e.length||(e=!1),e},selectCurrentResult:function(){var e=this,t=e.getCurrentResult();if(t){if(e.opt.multiple){var n=e.$suggest.val();n=-1!==n.indexOf(e.opt.multipleSep)?n.substring(0,n.lastIndexOf(e.opt.multipleSep)+e.opt.multipleSep.length)+" ":"",e.$suggest.val(n+t.text()+e.opt.multipleSep+" "),e.$suggest.focus()}else e.$suggest.val(t.text());e.$suggestions.hide(),e.$suggest.trigger("change"),e.opt.onSelect&&e.opt.onSelect.apply(e.$suggest.get(0))}},nextResult:function(){var e=this,t=e.getCurrentResult();t?t.removeClass(e.cls.select).next().addClass(e.cls.select):e.$suggestions.children("li:first-child").addClass(e.cls.select)},prevResult:function(){var e=this,t=e.getCurrentResult();t?t.removeClass(e.cls.select).prev().addClass(e.cls.select):e.$suggestions.children("li:last-child").addClass(e.cls.select)}}),e.fields.register("suggest",e.Suggest,".foofields-type-suggest",{source:null,multiple:!1,multipleSep:",",delay:100,minchars:2,delimiter:"\n",onSelect:!1,maxCacheSize:65536},{results:"foofields-suggest-results",select:"foofields-suggest-select",match:"foofields-suggest-match"},{})}(FooFields.$,FooFields,FooFields.utils.is,FooFields.utils.obj),function(e,t,n,i,o){t.__instance__=new t.Instance,n.expose(t.__instance__,t,["on","off","trigger","init","destroy","field","content","container","val"]),n.ready(function(){t.__instance__.init(window.FOOFIELDS)})}(FooFields.$,FooFields,FooFields.utils,FooFields.utils.is,FooFields.utils.obj);